import{_ as U,r as w,H as n,M as r,ad as m,K as t,J as l,Q as S,B as q,k as H,G as u,az as M,t as j,T as V,ae as g,R as x,N as D,I as C,L as F,P as L,O as v}from"./index.9c73f242.js";import{Q as z}from"./QSpinnerCube.4e2a8faa.js";import{u as y}from"./dinners-store.f78cceeb.js";import{Q as I}from"./QFile.a7ad9f74.js";import{Q as A,a as G,C as J}from"./ClosePopup.9d4b0806.js";import{Q as K}from"./QInput.34711f3e.js";import{Q as O,b as W,a as Y,c as Z}from"./QTabPanels.b791a8c3.js";import{b as ee}from"./QDialog.3f97503a.js";import{d as te,b as ae,Q as T,c as oe}from"./use-prevent-scroll.3d4fa4eb.js";import{Q as se}from"./QCard.89a509ba.js";import"./QChip.f0e0b7df.js";import"./use-dark.9125821f.js";import"./use-form.a31ae3ca.js";import"./use-file-dom-props.51037f88.js";import"./format.3e32b8d9.js";import"./use-render-cache.1a7235d4.js";import"./position-engine.a808bf1c.js";import"./selection.aa176e5e.js";import"./scroll.509a285f.js";import"./use-key-composition.3fb7cd5b.js";import"./QResizeObserver.ab169c72.js";import"./touch.3df10340.js";const ne={setup(){const _=w(null),e="dinners",{uploadFile:c}=y();return{file:_,mode:e,uploadFile:c}}},le={class:"q-pa-md"},re={class:"q-gutter-md row items-start"};function ie(_,e,c,a,h,p){return n(),r("div",le,[m("div",re,[t(I,{modelValue:a.file,"onUpdate:modelValue":[e[0]||(e[0]=i=>a.file=i),e[1]||(e[1]=i=>a.uploadFile(a.file,a.mode))],label:"\u041E\u0431\u0435\u0434\u044B Senesys",filled:"","use-chips":"",accept:".xlsx",style:{"max-width":"300px"}},{prepend:l(()=>[t(S,{name:"attach_file"})]),_:1},8,["modelValue"])])])}var de=U(ne,[["render",ie]]);const ue={setup(){const _=w(null),e="artis",{uploadFile:c}=y();return{file:_,mode:e,uploadFile:c}}},ce={class:"q-pa-md"},me={class:"q-gutter-md row items-start"};function pe(_,e,c,a,h,p){return n(),r("div",ce,[m("div",me,[t(I,{modelValue:a.file,"onUpdate:modelValue":[e[0]||(e[0]=i=>a.file=i),e[1]||(e[1]=i=>a.uploadFile(a.file,a.mode))],label:"\u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0438 1C7",filled:"","use-chips":"",accept:".xlsx",style:{"max-width":"300px"}},{prepend:l(()=>[t(S,{name:"attach_file"})]),_:1},8,["modelValue"])])])}var _e=U(ue,[["render",pe]]);const fe={class:"q-gutter-y-md dinners__handled-data",style:{"max-width":"500px"}},ve={class:"date-pdf-form"},ye={class:"row items-center justify-end"},he={key:0,class:"department-issues"},Qe={__name:"DinnersHandledData",setup(_){const{handledData:e}=q(y()),{download:c,downloadPDF:a,loadedDateRange:h}=y(),p=h,i=p?w(p[p.length-1]):new Date,Q=H(()=>new Date(i.value).toLocaleDateString()),b=w(null),B=Array.from(new Set(e.value.map(d=>d.Company).sort())),k=[];B.forEach((d,s)=>{k[s]={total:0},k[s].company=d}),e.value.forEach(d=>k.filter(s=>s.company==d.Company)[0].total+=d.Marks.length);const P=d=>{let s=!1,o=[];return d=="\u0410\u0440\u0442\u0438\u0441"&&e.value.filter(f=>f.Department=="!\u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435!").length&&(s=!0,o=e.value.filter(f=>f.Department=="!\u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435!")),{show:s,undefinedEaters:o}},N=()=>{const d=new Date(i.value).toLocaleDateString();return a(d)};return(d,s)=>(n(),r("div",fe,[m("div",ve,[t(K,{filled:"",modelValue:Q.value,"onUpdate:modelValue":s[1]||(s[1]=o=>Q.value=o),square:"",class:"date-picker"},{append:l(()=>[t(S,{name:"event",class:"cursor-pointer"},{default:l(()=>[t(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[t(G,{modelValue:u(i),"onUpdate:modelValue":s[0]||(s[0]=o=>M(i)?i.value=o:null),minimal:"",options:u(p)},{default:l(()=>[m("div",ye,[j(t(V,{label:"\u041E\u041A",color:"primary",flat:""},null,512),[[J]])])]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(V,{color:"secondary",label:"PDF",icon:"download",square:"",class:"pdf-btn",onClick:g(N,["prevent"])})]),t(se,null,{default:l(()=>[t(O,{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=o=>b.value=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[(n(),r(x,null,D(k,(o,f)=>t(W,{key:`label-${f}`,name:o.company,label:`${o.company} (${o.total})`},null,8,["name","label"])),64))]),_:1},8,["modelValue"]),t(ee),t(Y,{modelValue:b.value,"onUpdate:modelValue":s[3]||(s[3]=o=>b.value=o),animated:""},{default:l(()=>[(n(),r(x,null,D(k,(o,f)=>t(Z,{key:`panel-${f}`,name:o.company,class:"column"},{default:l(()=>[t(V,{class:"btn-fixed-width",color:"secondary",label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",icon:"download",onClick:g($=>u(c)(o.company),["prevent"])},null,8,["onClick"]),P(o.company).show?(n(),r("div",he,[t(te,{bordered:"",separator:""},{default:l(()=>[t(ae,null,{default:l(()=>[(n(!0),r(x,null,D(P(o.company).undefinedEaters,($,R)=>(n(),C(oe,{key:R},{default:l(()=>[t(T,null,{default:l(()=>[F(L($.Name),1)]),_:2},1024),(n(!0),r(x,null,D($.Tips,(E,X)=>(n(),C(T,{caption:"",key:`tip-${X}`},{default:l(()=>[F("\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u044D\u0442\u043E "+L(E),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):v("",!0)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})]))}};const be={class:"dinners"},ke=m("h4",{class:"dinners__title"},"\u041E\u0431\u0435\u0434\u044B",-1),we={key:0,class:"dinners__description"},xe=m("p",null,"\u0414\u043B\u044F \u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043E\u0442\u0447\u0435\u0442\u0430 \u043F\u043E \u043E\u0431\u0435\u0434\u0430\u043C \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B \u0438\u0437 Senesys \u0438 1\u04217.",-1),De=m("p",null,"Seneys \u0432\u044B\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0435 \u0441\u0430\u043C\u0438, \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430\u043C \u0438\u0437 1\u04217 \u0437\u0430\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0435 \u0443 \u0410\u0444\u043E\u043D\u0438\u043D\u0430.",-1),Ve=m("p",null,"\u041F\u0435\u0440\u0435\u0434 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u043E\u0439 \u0444\u0430\u0439\u043B\u043E\u0432 \u0432 \u0425\u0435\u043B\u043F\u0435\u0440 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0445 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 XLSX.",-1),$e=m("p",null,"\u0414\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u043D\u0430\u0434\u043E \u0438\u0445 \u043E\u0442\u043A\u0440\u044B\u0442\u044C, \u043D\u0430\u0436\u0430\u0442\u044C \u0424\u0430\u0439\u043B - \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A - \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u043E\u0440\u043C\u0430\u0442 XLSX.",-1),ge=[xe,De,Ve,$e],Ce={key:1,class:"dinners__upload"},Se={key:3,class:"loader"},Pe={key:4,class:"dinners__result"},Ze={__name:"DinnersPage",setup(_){const e=w(!1),{files:c,hdIsReady:a}=q(y()),{upload:h}=y(),p=()=>{e.value=!0};return(i,Q)=>(n(),r("div",be,[ke,!u(a)&&!e.value?(n(),r("section",we,ge)):v("",!0),!u(a)&&!e.value?(n(),r("div",Ce,[t(de,{class:"up1"}),t(_e,{class:"up2"})])):v("",!0),u(c).dinners&&u(c).artis&&!u(a)&&!e.value?(n(),C(V,{key:2,class:"btn-fixed-width",color:"secondary",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",icon:"upload",onClick:Q[0]||(Q[0]=g(b=>{u(h)(),p()},["prevent"]))})):v("",!0),!u(a)&&e.value?(n(),r("div",Se,[t(z,{color:"primary",size:"5.5em"})])):v("",!0),u(a)?(n(),r("section",Pe,[t(Qe)])):v("",!0)]))}};export{Ze as default};
