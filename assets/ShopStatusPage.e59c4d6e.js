import{X as A,D as R,r as p,a as f,ao as S,s as x,p as C,q as U,t as r,v as t,u as o,E as h,y as w,x as F,ad as Q,aC as M}from"./index.36d0b482.js";import{Q as N}from"./QTable.52683ab3.js";import{Q as P,a as D}from"./QBar.331f3289.js";import{Q as E}from"./QTooltip.6bff337a.js";import{Q as V}from"./QCardSection.e7d26b1e.js";import{Q as v}from"./QInput.e513b8db.js";import{Q as L}from"./QForm.dafe3cd4.js";import{Q as I}from"./QCard.2bc4f81f.js";import{Q as X}from"./QDialog.0d6eb48a.js";import"./QSeparator.b21a15b8.js";import"./use-dark.cc47ea02.js";import"./QList.baa58d36.js";import"./QMenu.b3dbd1a5.js";import"./position-engine.6c7f8a4d.js";import"./selection.d97ab783.js";import"./use-form.7f75854f.js";import"./scroll.10ab085c.js";import"./QChip.a10ba570.js";import"./QItem.1f8eb1ea.js";import"./use-key-composition.988c7d52.js";import"./format.3e32b8d9.js";import"./QLinearProgress.e44631f6.js";import"./use-file-dom-props.3b45cb4a.js";import"./use-prevent-scroll.9143d7a8.js";const g=A("shopStatuses",()=>{const{user:c}=R(),n=p([]),e=p(!1),i=p(null),_=p(["\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"]),m=p([]),d={status:"",title:"",capture:""},u=f(()=>n.value),s=f(()=>e.value),a=f(()=>i.value),y=f(()=>_.value.concat(n.value.map(l=>l.title))),B=f(()=>m.value),q=()=>{e.value=!0,i.value={...d}},$=()=>{e.value=!1},z=()=>{i.value={...d}},T=async l=>{await S.post("/admin/shopstatus/new",{...a.value},{headers:{Authorization:`Bearer ${c.token}`}}).then(k=>{b(),e.value=!1}).catch(k=>console.log(k))},b=async()=>{await S.get("/admin/shopstatus/all",{headers:{Authorization:`Bearer ${c.token}`}}).then(l=>n.value=l.data.data).catch(l=>console.log(l))};return{statuses:u,dialogState:s,statusCard:a,titles:y,limitedMaterials:B,addStatus:T,openStatusCard:q,resetCard:z,closeStatusCard:$,getAllStatuses:b,getLimitedMaterials:async()=>{await S.get("/admin/shopstatus/limits",{headers:{Authorization:`Bearer ${c.token}`}}).then(l=>m.value=l.data.data).catch(l=>console.log(l))}}}),j={__name:"ShopStatusTable",setup(c){const{statuses:n,titles:e}=x(g()),{openStatusCard:i}=g(),_=f(()=>e.value.map(u=>({name:u,required:!0,label:u,field:u,align:"left",sortable:!0}))),m=[],d={page:1,rowsPerPage:0};return(u,s)=>(C(),U(N,{title:"\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F \u043D\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0443 \u043F\u043E \u0441\u0442\u0430\u0442\u0443\u0441\u0443",rows:m,columns:_.value,class:"my-sticky-header-table","row-key":"name",pagination:d},{"top-right":r(a=>[t(h,{icon:"add",class:"q-ml-sm",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441",color:"positive",onClick:o(i)},null,8,["onClick"]),t(h,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),_:1},8,["columns"]))}},G={class:"container"},H=Q("h4",null,"\u041D\u043E\u0432\u044B\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",-1),J={class:"btn-block"},K={__name:"ShopStatusCard",setup(c){const{dialogState:n,statusCard:e}=x(g()),{closeStatusCard:i,resetCard:_,addStatus:m}=g(),d=p(!0);return(u,s)=>(C(),w("div",G,[t(X,{modelValue:o(n),"onUpdate:modelValue":s[3]||(s[3]=a=>M(n)?n.value=a:null),persistent:"",maximized:d.value,"transition-show":"slide-left","transition-hide":"slide-left"},{default:r(()=>[t(I,null,{default:r(()=>[t(P,null,{default:r(()=>[t(D),t(h,{dense:"",flat:"",icon:"close",onClick:o(i)},{default:r(()=>[t(E,{class:"bg-white text-primary"},{default:r(()=>[F("\u0417\u0430\u043A\u0440\u044B\u0442\u044C")]),_:1})]),_:1},8,["onClick"])]),_:1}),t(V,null,{default:r(()=>[H]),_:1}),t(V,{class:"q-pt-none"},{default:r(()=>[t(L,{onSubmit:o(m),onReset:o(_),class:"q-gutter-md"},{default:r(()=>[t(v,{label:"\u0422\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",modelValue:o(e).status,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).status=a),hint:"regular, top, etc"},null,8,["modelValue"]),t(v,{label:"\u0422\u0438\u0442\u0443\u043B\u044C\u043D\u043E\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",modelValue:o(e).title,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).title=a),hint:"\u041E\u0431\u044B\u0447\u043D\u044B\u0439, \u0422\u043E\u043F\u043E\u0432\u044B\u0439 \u0438 \u0442.\u0434."},null,8,["modelValue"]),t(v,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",modelValue:o(e).capture,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).capture=a),hint:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0432\u043D\u044B\u043C"},null,8,["modelValue"]),Q("div",J,[t(h,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",type:"submit",color:"positive"}),t(h,{label:"\u0421\u0431\u0440\u043E\u0441",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]))}},O={class:"container"},W=Q("h4",null," \u0421\u0442\u0430\u0442\u0443\u0441\u044B \u0424\u0421 ",-1),kt={__name:"ShopStatusPage",setup(c){return(n,e)=>(C(),w("div",O,[W,t(j),t(K)]))}};export{kt as default};
