import{Q as Ie,a as Re}from"./QLayout.b31cba2c.js";import{Q as oe,a as We,b as he}from"./QItem.594eba31.js";import{c as G,i as ke,e as M,r as C,a as u,w as c,o as Ne,n as be,b as pe,d as Ue,h as B,f as ye,g as se,l as Ce,j as qe,s as le,k as Ee,m as je,u as F,p as L,q as A,t as _,v,x as P,y as E,z as Ge,Q as Je,A as _e,B as re,F as Ke,C as Xe,D as Ye,E as ie,G as Ze,H as et,_ as tt,I as at,J as ne}from"./index.b9a71e9d.js";import{Q as ot}from"./QList.dae925e4.js";import{u as lt,a as nt}from"./use-prevent-scroll.8dd69e36.js";import{u as ut,a as rt,b as it,c as st}from"./selection.1f4bea8e.js";import{u as ct,a as dt}from"./use-dark.1714981a.js";import{T as ue}from"./TouchPan.5fa73c29.js";import{b as U}from"./format.de7e9769.js";import{u as j}from"./leftDrawer-store.721ae7f0.js";import{Q as ft}from"./QResizeObserver.7dd6d67b.js";import"./scroll.c2b3f819.js";import"./touch.9135741d.js";const we=150;var vt=G({name:"QDrawer",inheritAttrs:!1,props:{...ut,...ct,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...rt,"onLayout","miniState"],setup(e,{slots:m,emit:i,attrs:w}){const n=qe(),{proxy:{$q:d}}=n,f=dt(e,d),{preventBodyScroll:k}=nt(),{registerTimeout:Q,removeTimeout:I}=it(),a=ke(Ce,M);if(a===M)return console.error("QDrawer needs to be child of QLayout"),M;let H,q=null,h;const s=C(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),S=u(()=>e.mini===!0&&s.value!==!0),y=u(()=>S.value===!0?e.miniWidth:e.width),r=C(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),l=u(()=>e.persistent!==!0&&(s.value===!0||Le.value===!0));function p(t,o){if(xe(),t!==!1&&a.animate(),g(0),s.value===!0){const b=a.instances[W.value];(b==null?void 0:b.belowBreakpoint)===!0&&b.hide(!1),T(1),a.isContainer.value!==!0&&k(!0)}else T(0),t!==!1&&ee(!1);Q(()=>{t!==!1&&ee(!0),o!==!0&&i("show",t)},we)}function ce(t,o){Be(),t!==!1&&a.animate(),T(0),g(D.value*y.value),te(),o!==!0?Q(()=>{i("hide",t)},we):I()}const{show:J,hide:V}=st({showing:r,hideOnRouteChange:l,handleShow:p,handleHide:ce}),{addToHistory:xe,removeFromHistory:Be}=lt(r,V,l),R={belowBreakpoint:s,hide:V},x=u(()=>e.side==="right"),D=u(()=>(d.lang.rtl===!0?-1:1)*(x.value===!0?1:-1)),de=C(0),O=C(!1),K=C(!1),fe=C(y.value*D.value),W=u(()=>x.value===!0?"left":"right"),X=u(()=>r.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:y.value:0),Y=u(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(x.value?"R":"L")!==-1||d.platform.is.ios===!0&&a.isContainer.value===!0),z=u(()=>e.overlay===!1&&r.value===!0&&s.value===!1),Le=u(()=>e.overlay===!0&&r.value===!0&&s.value===!1),Te=u(()=>"fullscreen q-drawer__backdrop"+(r.value===!1&&O.value===!1?" hidden":"")),$e=u(()=>({backgroundColor:`rgba(0,0,0,${de.value*.4})`})),ve=u(()=>x.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Qe=u(()=>x.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Se=u(()=>{const t={};return a.header.space===!0&&ve.value===!1&&(Y.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Qe.value===!1&&(Y.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),De=u(()=>{const t={width:`${y.value}px`,transform:`translateX(${fe.value}px)`};return s.value===!0?t:Object.assign(t,Se.value)}),Oe=u(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Me=u(()=>`q-drawer q-drawer--${e.side}`+(K.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(f.value===!0?" q-drawer--dark q-dark":"")+(O.value===!0?" no-transition":r.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${S.value===!0?"mini":"standard"}`+(Y.value===!0||z.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ve.value===!0?" q-drawer--top-padding":""))),He=u(()=>{const t=d.lang.rtl===!0?e.side:W.value;return[[ue,Pe,void 0,{[t]:!0,mouse:!0}]]}),Ve=u(()=>{const t=d.lang.rtl===!0?W.value:e.side;return[[ue,me,void 0,{[t]:!0,mouse:!0}]]}),ze=u(()=>{const t=d.lang.rtl===!0?W.value:e.side;return[[ue,me,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function Z(){Fe(s,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}c(s,t=>{t===!0?(H=r.value,r.value===!0&&V(!1)):e.overlay===!1&&e.behavior!=="mobile"&&H!==!1&&(r.value===!0?(g(0),T(0),te()):J(!1))}),c(()=>e.side,(t,o)=>{a.instances[o]===R&&(a.instances[o]=void 0,a[o].space=!1,a[o].offset=0),a.instances[t]=R,a[t].size=y.value,a[t].space=z.value,a[t].offset=X.value}),c(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&Z()}),c(()=>e.behavior+e.breakpoint,Z),c(a.isContainer,t=>{r.value===!0&&k(t!==!0),t===!0&&Z()}),c(a.scrollbarWidth,()=>{g(r.value===!0?0:void 0)}),c(X,t=>{$("offset",t)}),c(z,t=>{i("onLayout",t),$("space",t)}),c(x,()=>{g()}),c(y,t=>{g(),ae(e.miniToOverlay,t)}),c(()=>e.miniToOverlay,t=>{ae(t,y.value)}),c(()=>d.lang.rtl,()=>{g()}),c(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ae(),a.animate())}),c(S,t=>{i("miniState",t)});function g(t){t===void 0?be(()=>{t=r.value===!0?0:y.value,g(D.value*t)}):(a.isContainer.value===!0&&x.value===!0&&(s.value===!0||Math.abs(t)===y.value)&&(t+=D.value*a.scrollbarWidth.value),fe.value=t)}function T(t){de.value=t}function ee(t){const o=t===!0?"remove":a.isContainer.value!==!0?"add":"";o!==""&&document.body.classList[o]("q-body--drawer-toggle")}function Ae(){q!==null&&clearTimeout(q),n.proxy&&n.proxy.$el&&n.proxy.$el.classList.add("q-drawer--mini-animate"),K.value=!0,q=setTimeout(()=>{var t,o;q=null,K.value=!1,(o=(t=n==null?void 0:n.proxy)==null?void 0:t.$el)==null||o.classList.remove("q-drawer--mini-animate")},150)}function Pe(t){if(r.value!==!1)return;const o=y.value,b=U(t.distance.x,0,o);if(t.isFinal===!0){b>=Math.min(75,o)===!0?J():(a.animate(),T(0),g(D.value*o)),O.value=!1;return}g((d.lang.rtl===!0?x.value!==!0:x.value)?Math.max(o-b,0):Math.min(0,b-o)),T(U(b/o,0,1)),t.isFirst===!0&&(O.value=!0)}function me(t){if(r.value!==!0)return;const o=y.value,b=t.direction===e.side,N=(d.lang.rtl===!0?b!==!0:b)?U(t.distance.x,0,o):0;if(t.isFinal===!0){Math.abs(N)<Math.min(75,o)===!0?(a.animate(),T(1),g(0)):V(),O.value=!1;return}g(D.value*N),T(U(1-N/o,0,1)),t.isFirst===!0&&(O.value=!0)}function te(){k(!1),ee(!0)}function $(t,o){a.update(e.side,t,o)}function Fe(t,o){t.value!==o&&(t.value=o)}function ae(t,o){$("size",t===!0?e.miniWidth:o)}return a.instances[e.side]=R,ae(e.miniToOverlay,y.value),$("space",z.value),$("offset",X.value),e.showIfAbove===!0&&e.modelValue!==!0&&r.value===!0&&e["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Ne(()=>{i("onLayout",z.value),i("miniState",S.value),H=e.showIfAbove===!0;const t=()=>{(r.value===!0?p:ce)(!1,!0)};if(a.totalWidth.value!==0){be(t);return}h=c(a.totalWidth,()=>{h(),h=void 0,r.value===!1&&e.showIfAbove===!0&&s.value===!1?J(!1):t()})}),pe(()=>{h==null||h(),q!==null&&(clearTimeout(q),q=null),r.value===!0&&te(),a.instances[e.side]===R&&(a.instances[e.side]=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const t=[];s.value===!0&&(e.noSwipeOpen===!1&&t.push(Ue(B("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),He.value)),t.push(ye("div",{ref:"backdrop",class:Te.value,style:$e.value,"aria-hidden":"true",onClick:V},void 0,"backdrop",e.noSwipeBackdrop!==!0&&r.value===!0,()=>ze.value)));const o=S.value===!0&&m.mini!==void 0,b=[B("div",{...w,key:""+o,class:[Oe.value,w.class]},o===!0?m.mini():se(m.default))];return e.elevated===!0&&r.value===!0&&b.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(ye("aside",{ref:"content",class:Me.value,style:De.value},b,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>Ve.value)),B("div",{class:"q-drawer-container"},t)}}});const mt={__name:"LeftDrawer",setup(e){const{leftDrawerOpen:m}=le(j()),i=C(null);Ee(()=>{const{userRoutes:n}=le(j());i.value=n.value});const{userRoutes:w}=le(j());return je(()=>{i.value=w.value}),(n,d)=>F(m)?(L(),A(vt,{key:0,"show-if-above":"",bordered:""},{default:_(()=>[v(ot,null,{default:_(()=>[v(oe,{header:""},{default:_(()=>[P(" \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u044B ")]),_:1}),(L(!0),E(Ke,null,Ge(F(w),(f,k)=>(L(),A(We,{clickable:"",tag:"a",to:f.link,key:`r-${k}`},{default:_(()=>[f.icon?(L(),A(he,{key:0,avatar:""},{default:_(()=>[v(Je,{name:f.icon},null,8,["name"])]),_:2},1024)):_e("",!0),v(he,null,{default:_(()=>[v(oe,null,{default:_(()=>[P(re(f.title),1)]),_:2},1024),v(oe,{caption:""},{default:_(()=>[P(re(f.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})):_e("",!0)}};var ge=G({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:m}){const i=u(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>B("div",{class:i.value},se(m.default))}}),ht=G({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:m}){const i=u(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>B("div",{class:i.value,role:"toolbar"},se(m.default))}}),bt=G({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:m,emit:i}){const{proxy:{$q:w}}=qe(),n=ke(Ce,M);if(n===M)return console.error("QHeader needs to be child of QLayout"),M;const d=C(parseInt(e.heightHint,10)),f=C(!0),k=u(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||w.platform.is.ios&&n.isContainer.value===!0),Q=u(()=>{if(e.modelValue!==!0)return 0;if(k.value===!0)return f.value===!0?d.value:0;const l=d.value-n.scroll.value.position;return l>0?l:0}),I=u(()=>e.modelValue!==!0||k.value===!0&&f.value!==!0),a=u(()=>e.modelValue===!0&&I.value===!0&&e.reveal===!0),H=u(()=>"q-header q-layout__section--marginal "+(k.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(I.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),q=u(()=>{const l=n.rows.value.top,p={};return l[0]==="l"&&n.left.space===!0&&(p[w.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),l[2]==="r"&&n.right.space===!0&&(p[w.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),p});function h(l,p){n.update("header",l,p)}function s(l,p){l.value!==p&&(l.value=p)}function S({height:l}){s(d,l),h("size",l)}function y(l){a.value===!0&&s(f,!0),i("focusin",l)}c(()=>e.modelValue,l=>{h("space",l),s(f,!0),n.animate()}),c(Q,l=>{h("offset",l)}),c(()=>e.reveal,l=>{l===!1&&s(f,e.modelValue)}),c(f,l=>{n.animate(),i("reveal",l)}),c(n.scroll,l=>{e.reveal===!0&&s(f,l.direction==="up"||l.position<=e.revealOffset||l.position-l.inflectionPoint<100)});const r={};return n.instances.header=r,e.modelValue===!0&&h("size",d.value),h("space",e.modelValue),h("offset",Q.value),pe(()=>{n.instances.header===r&&(n.instances.header=void 0,h("size",0),h("offset",0),h("space",!1))}),()=>{const l=Xe(m.default,[]);return e.elevated===!0&&l.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push(B(ft,{debounce:0,onResize:S})),B("header",{class:H.value,style:q.value,onFocusin:y},l)}}});const yt={class:"account-menu"},_t={key:0,class:"login-btn"},wt={key:1,class:"account-info"},gt={__name:"UserControl",setup(e){const{user:m,logout:i}=Ye();return(w,n)=>(L(),E("div",yt,[F(m)?(L(),E("div",wt,[v(ie,{color:"secondary",icon:"logout",label:"\u0412\u044B\u0439\u0442\u0438",onClick:F(i)},null,8,["onClick"])])):(L(),E("div",_t,[v(ie,{color:"secondary",icon:"person",label:"\u0412\u043E\u0439\u0442\u0438",to:"/login"})]))]))}},kt={__name:"HeaderComponent",setup(e){const{toggleLeftDrawer:m}=j(),i=C(""),w=Ze();return et(()=>{i.value=w.currentRoute.value.name}),(n,d)=>(L(),A(bt,{elevated:""},{default:_(()=>[v(ht,null,{default:_(()=>[v(ie,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:F(m)},null,8,["onClick"]),v(ge,null,{default:_(()=>[P(" ArtisHelper ")]),_:1}),v(ge,null,{default:_(()=>[P(re(i.value),1)]),_:1}),v(gt)]),_:1})]),_:1}))}},pt=at({name:"MainLayout",components:{HeaderComponent:kt,LeftDrawer:mt},setup(){}});function Ct(e,m,i,w,n,d){const f=ne("HeaderComponent"),k=ne("LeftDrawer"),Q=ne("router-view");return L(),A(Ie,{view:"lHh Lpr lFf"},{default:_(()=>[v(f),v(k),v(Re,null,{default:_(()=>[v(Q)]),_:1})]),_:1})}var At=tt(pt,[["render",Ct]]);export{At as default};
