import{A as Se,C as be,r as b,j as m,ao as A,B as Z,F as we,G as v,H as w,I as Q,J as d,K as l,T as P,O as ee,t as O,h as E,w as j,m as R,f as F,b as L,an as ke,z as te,v as oe,g as Ce,M as ae,L as U,ad as se,P as W,ap as Te}from"./index.62b09686.js";import{Q as ne}from"./QTable.fca1c974.js";import{u as Pe,a as xe,v as I,b as Qe,c as Oe,d as qe,e as Be,f as Ve,g as Ae,r as G,s as Ee,p as J,h as $e,Q as De}from"./QDialog.4d957239.js";import{u as He,a as Me,b as ze,d as Ne,c as K}from"./selection.663c804d.js";import{g as je}from"./scroll.a2ecb5a1.js";import{u as Re,a as Fe}from"./use-dark.0e85ba3a.js";import{Q as X}from"./QCardSection.b7d441d4.js";import{Q as Y,a as Le}from"./QTd.e676fa53.js";import{Q as Ue}from"./QCard.2279c428.js";import"./QList.fc872a7b.js";import"./use-form.62d1521a.js";import"./QChip.a306cd92.js";import"./use-key-composition.4fc25fba.js";import"./format.3e32b8d9.js";const q=Se("shops",()=>{const{user:e}=be(),i=b(null),n=b(!1),o=b(null),c=m(()=>n.value),h=m(()=>i.value),y=m(()=>o.value),t=m(()=>o.value.name),f=m(()=>{let u=[];for(let a in o.value)u.push({\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440:a,\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435:o.value[a]});return u});return{getShops:async()=>{await A.get("/shops",{headers:{Authorization:`Bearer ${e.token}`}}).then(u=>{i.value=u.data.data}).catch(u=>console.log(u))},addShop:async u=>{await A.post("/shops/new",{shop:u},{headers:{Authorization:`Bearer ${e.token}`}}).then(a=>console.log(a)).catch(a=>console.log(a))},updateShop:async u=>{await A.post("/shops/update",{shop:u},{headers:{Authorization:`Bearer ${e.token}`}}).then(a=>console.log(a)).catch(a=>console.log(a))},shops:h,dialogState:c,openShopCard:(u,a)=>{o.value=a,n.value=!0},closeShopCard:()=>{n.value=!1,o.value=null},shopCard:f,shopCardName:t,shopCardModel:y}}),We={__name:"ShopsTable",setup(e){const{getShops:i,openShopCard:n}=q(),{shops:o}=Z(q()),c=["name","region","email","status","coffee_machine"],h=m(()=>c.map(t=>({name:t,required:!0,label:t,field:t,align:"left",sortable:!0}))),y={page:1,rowsPerPage:0};return we(()=>{i()}),(t,f)=>v(o)?(w(),Q(ne,{key:0,title:"\u041F\u0435\u0440\u0435\u0447\u0435\u043D\u044C \u0444\u0438\u0440\u043C\u0435\u043D\u043D\u044B\u0445 \u0441\u0430\u043B\u043E\u043D\u043E\u0432",rows:v(o),columns:v(h),class:"my-sticky-header-table",onRowClick:v(n),"row-key":"name",pagination:y},{"top-right":d(p=>[l(P,{icon:"download",label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",color:"primary"}),l(P,{flat:"",round:"",dense:"",icon:p.inFullscreen?"fullscreen_exit":"fullscreen",onClick:p.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),_:1},8,["rows","columns","onRowClick"])):ee("",!0)}},Ie=O("div",{class:"q-space"});var Ge=E({name:"QSpace",setup(){return()=>Ie}}),Je=E({name:"QTooltip",inheritAttrs:!1,props:{...Pe,...He,...xe,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:I},self:{type:String,default:"top middle",validator:I},offset:{type:Array,default:()=>[14,14],validator:Qe},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Me],setup(e,{slots:i,emit:n,attrs:o}){let c,h;const y=te(),{proxy:{$q:t}}=y,f=b(null),p=b(!1),_=m(()=>J(e.anchor,t.lang.rtl)),k=m(()=>J(e.self,t.lang.rtl)),r=m(()=>e.persistent!==!0),{registerTick:x,removeTick:u}=Oe(),{registerTimeout:a}=ze(),{transitionProps:le,transitionStyle:re}=qe(e),{localScrollTarget:$,changeScrollEvent:ie,unconfigureScrollTarget:ce}=Be(e,z),{anchorEl:g,canShow:ue,anchorEvents:C}=Ve({showing:p,configureAnchorEl:ve}),{show:de,hide:B}=Ne({showing:p,canShow:ue,handleShow:he,handleHide:fe,hideOnRouteChange:r,processOnMount:!0});Object.assign(C,{delayShow:pe,delayHide:ge});const{showPortal:D,hidePortal:H,renderPortal:me}=Ae(y,f,_e,"tooltip");if(t.platform.is.mobile===!0){const s={anchorEl:g,innerRef:f,onClickOutside(S){return B(S),S.target.classList.contains("q-dialog__backdrop")&&Ce(S),!0}},V=m(()=>e.modelValue===null&&e.persistent!==!0&&p.value===!0);j(V,S=>{(S===!0?$e:G)(s)}),R(()=>{G(s)})}function he(s){D(),x(()=>{h=new MutationObserver(()=>T()),h.observe(f.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),T(),z()}),c===void 0&&(c=j(()=>t.screen.width+"|"+t.screen.height+"|"+e.self+"|"+e.anchor+"|"+t.lang.rtl,T)),a(()=>{D(!0),n("show",s)},e.transitionDuration)}function fe(s){u(),H(),M(),a(()=>{H(!0),n("hide",s)},e.transitionDuration)}function M(){h!==void 0&&(h.disconnect(),h=void 0),c!==void 0&&(c(),c=void 0),ce(),F(C,"tooltipTemp")}function T(){const s=f.value;g.value===null||!s||Ee({el:s,offset:e.offset,anchorEl:g.value,anchorOrigin:_.value,selfOrigin:k.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function pe(s){if(t.platform.is.mobile===!0){K(),document.body.classList.add("non-selectable");const V=g.value,S=["touchmove","touchcancel","touchend","click"].map(N=>[V,N,"delayHide","passiveCapture"]);L(C,"tooltipTemp",S)}a(()=>{de(s)},e.delay)}function ge(s){t.platform.is.mobile===!0&&(F(C,"tooltipTemp"),K(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),a(()=>{B(s)},e.hideDelay)}function ve(){if(e.noParentEvent===!0||g.value===null)return;const s=t.platform.is.mobile===!0?[[g.value,"touchstart","delayShow","passive"]]:[[g.value,"mouseenter","delayShow","passive"],[g.value,"mouseleave","delayHide","passive"]];L(C,"anchor",s)}function z(){if(g.value!==null||e.scrollTarget!==void 0){$.value=je(g.value,e.scrollTarget);const s=e.noParentEvent===!0?T:B;ie($.value,s)}}function ye(){return p.value===!0?O("div",{...o,ref:f,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,re.value],role:"tooltip"},oe(i.default)):null}function _e(){return O(ke,le.value,ye)}return R(M),Object.assign(y.proxy,{updatePosition:T}),me}}),Ke=E({name:"QBar",props:{...Re,dense:Boolean},setup(e,{slots:i}){const{proxy:{$q:n}}=te(),o=Fe(e,n),c=m(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${o.value===!0?"dark":"light"}`);return()=>O("div",{class:c.value,role:"toolbar"},oe(i.default))}});const Xe={class:"shop-card"},Ye={class:"text-h6"},Ze={__name:"ShopCard",setup(e){const{dialogState:i,shopCard:n,shopCardName:o,shopCardModel:c}=Z(q()),{closeShopCard:h}=q(),y=b(!0),t=b(c),f=m(()=>Object.keys(n.value[0]).map(_=>({name:_,required:!0,label:_,field:_,align:"left",sortable:!0}))),p={page:1,rowsPerPage:0};return(_,k)=>(w(),ae("div",Xe,[l(De,{modelValue:v(i),"onUpdate:modelValue":k[0]||(k[0]=r=>Te(i)?i.value=r:null),persistent:"",maximized:y.value,"transition-show":"slide-left","transition-hide":"slide-left"},{default:d(()=>[l(Ue,null,{default:d(()=>[l(Ke,null,{default:d(()=>[l(Ge),l(P,{dense:"",flat:"",icon:"close",onClick:v(h)},{default:d(()=>[l(Je,{class:"bg-white text-primary"},{default:d(()=>[U("\u0417\u0430\u043A\u0440\u044B\u0442\u044C")]),_:1})]),_:1},8,["onClick"])]),_:1}),l(X,null,{default:d(()=>[se("div",Ye,"\u0424\u0438\u0440\u043C\u0435\u043D\u043D\u044B\u0439 \u0441\u0430\u043B\u043E\u043D "+W(v(o)),1)]),_:1}),l(X,{class:"q-pt-none"},{default:d(()=>[v(n)?(w(),Q(ne,{key:0,dense:"",title:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",rows:v(n),columns:v(f),"hide-bottom":"",class:"my-sticky-header-table","row-key":"name",pagination:p},{"top-right":d(r=>[l(P,{flat:"",round:"",color:"secondary",icon:"cloud_upload"}),l(P,{flat:"",round:"",dense:"",icon:r.inFullscreen?"fullscreen_exit":"fullscreen",onClick:r.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),"body-cell-\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435":d(r=>[typeof r.row.\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435=="boolean"?(w(),Q(Y,{key:0,props:r},{default:d(()=>[l(Le,{modelValue:t.value[r.row.\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440],"onUpdate:modelValue":x=>t.value[r.row.\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440]=x,size:"xs",color:"green"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])):(w(),Q(Y,{key:1,props:r},{default:d(()=>[U(W(r.row.\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435),1)]),_:2},1032,["props"]))]),_:1},8,["rows","columns"])):ee("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]))}},et={class:"shops"},tt=se("h3",null,"\u0424\u0421",-1),gt={__name:"ShopsPage",setup(e){return(i,n)=>(w(),ae("div",et,[tt,l(We),l(Ze)]))}};export{gt as default};
