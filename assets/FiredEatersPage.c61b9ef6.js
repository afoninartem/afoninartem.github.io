import{A as D,C as E,r as k,k as d,ao as p,B as S,F as A,V as C,H as l,M as f,L as c,ad as g,K as y,J as v,P as b,G as h,O as _,I as x,ae as L,T as N}from"./index.3fed2421.js";import{Q as V}from"./QTable.db823af6.js";import{u as q}from"./dinners-store.c02de564.js";import"./QSeparator.dca876d8.js";import"./use-dark.7be76274.js";import"./use-prevent-scroll.c7f0ecee.js";import"./scroll.9a76306a.js";import"./QDialog.a3ddb180.js";import"./position-engine.2afcebae.js";import"./selection.19639fea.js";import"./use-form.12a5b6c2.js";import"./QChip.a3ffc295.js";import"./QItem.585b58cf.js";import"./use-key-composition.0fcc8103.js";import"./format.3e32b8d9.js";import"./QLinearProgress.a985a1f1.js";const B=D("firedEaters",()=>{const{user:a}=E(),r=k([]),o=k([]);async function u(){await p.get("/get-senesys-records-dates",{headers:{Authorization:`Bearer ${a.token}`}}).then(e=>r.value=e.data.data).catch(e=>console.log(e))}async function t(){await p.post("/check-fired",{},{headers:{Authorization:`Bearer ${a.token}`}}).then(e=>console.log(e))}async function n(){await p.get("/get-fired-eaters",{headers:{Authorization:`Bearer ${a.token}`}}).then(e=>o.value=e.data.data).catch(e=>console.log(e))}const m=d(()=>r.value.map(e=>new Date(e).toLocaleDateString())),s=d(()=>o.value);return{getFirstAndLastSenesysRecordsDates:u,rangeEdges:m,checkFired:t,getFired:n,firedEaters:s}});const M={class:"fired-eaters"},R=g("h4",null,"\u041F\u043E\u0438\u0441\u043A \u0443\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0445",-1),T={key:0},z=g("br",null,null,-1),P={key:2,class:"table"},re={__name:"FiredEatersPage",setup(a){const{getFirstAndLastSenesysRecordsDates:r,checkFired:o,getFired:u}=B(),{rangeEdges:t,firedEaters:n}=S(B()),{loadedDateRange:m}=q(),s=d(()=>Boolean(t.value.length&&m.length)),e=d(()=>n.value?n.value.map(i=>({name:i.Name,company:i.Company,month:"-",dinners:i.Marks.length})):[]),w=[{name:"company",required:!0,label:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",field:"company",align:"left",sortable:!0},{name:"name",required:!0,label:"\u0424\u0418\u041E",field:"name",align:"left",sortable:!0},{name:"month",required:!0,label:"\u041C\u0435\u0441\u044F\u0446",field:"month",align:"left",sortable:!0},{name:"dinners",required:!0,label:"\u041E\u0431\u0435\u0434\u044B",field:"dinners",align:"left",sortable:!0}];return A(()=>{r(),u()}),(i,Q)=>{const F=C("router-link");return l(),f("div",M,[R,s.value?_("",!0):(l(),f("p",T,[c("\u0414\u043B\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 "),g("span",null,[y(F,{to:"/maintenance/dinners"},{default:v(()=>[c("\u041E\u0431\u0435\u0434\u044B")]),_:1})]),c(" \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u0437 Senesys \u0441 "+b(h(t)[0])+" \u043F\u043E "+b(h(t)[1]),1)])),s.value?(l(),x(N,{key:1,color:"secondary",onClick:L(h(o),["prevent"])},{default:v(()=>[c("\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0443\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0445")]),_:1},8,["onClick"])):_("",!0),z,e.value.length?(l(),f("div",P,[y(V,{title:"\u0423\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0435",rows:e.value,columns:w,"row-key":"name","hide-bottom":""},null,8,["rows"])])):_("",!0)])}}};export{re as default};
