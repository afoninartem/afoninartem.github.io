import{A as b,C as g,r as c,k as f,ao as x,H as d,M as _,ad as r,K as n,J as k,Q as y,G as w,B as F,I as B,ae as m,T as h,O as T}from"./index.9c73f242.js";import{Q as V}from"./QFile.a7ad9f74.js";import"./QChip.f0e0b7df.js";import"./use-dark.9125821f.js";import"./use-form.a31ae3ca.js";import"./use-file-dom-props.51037f88.js";import"./format.3e32b8d9.js";const u=b("shipment",()=>{const{user:i}=g(),t=c(null),o=c(null),a=f(()=>({leftovers:t.value,shipment:o.value}));return{uploadFile:(e,l)=>{switch(l){case"leftovers":t.value=e;break;case"shipment":o.value=e;break}},upload:async()=>{const e=new FormData;e.append("leftovers",a.value.leftovers),e.append("shipment",a.value.shipment),console.log(e),await x.post("/warehouse/shipment/upload",e,{headers:{Authorization:`Bearer ${i.token}`,"Content-Type":"multipart/form-data"}}).then(l=>{console.log(l)}).catch(l=>console.log(l))},files:a}}),$={class:"q-pa-md"},C={class:"q-gutter-md row items-start"},v={__name:"uploadFileTXT_WH",props:["mode","label"],setup(i){const t=i,o=c(null),{uploadFile:a}=u();return(p,s)=>(d(),_("div",$,[r("div",C,[n(V,{modelValue:o.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>o.value=e),s[1]||(s[1]=e=>w(a)(o.value,t.mode))],label:t.label,square:"",filled:"","use-chips":"",accept:".txt",style:{width:"400px"}},{prepend:k(()=>[n(y,{name:"attach_file"})]),_:1},8,["modelValue","label"])])]))}},S={class:"shipment"},Q={class:"shipment__upload"},A=r("h4",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u043E\u0432",-1),I={class:"inputs"},O={__name:"ShipmentPage",setup(i){const{files:t}=F(u()),{upload:o}=u(),a=f(()=>t.value&&t.value.shipment&&t.value.leftovers),p=async()=>{console.log("test is ready");const[s]=await window.showOpenFilePicker();console.log(s);const e=await s.getFile();console.log(await e.slice())};return(s,e)=>(d(),_("div",S,[r("div",Q,[A,r("div",I,[n(v,{mode:"leftovers",label:"\u041E\u0441\u0442\u0430\u0442\u043A\u0438.txt"}),n(v,{mode:"shipment",label:"\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430.txt"})]),a.value?(d(),B(h,{key:0,class:"btn-fixed-width",color:"secondary",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",icon:"upload",style:{height:"61px"},onClick:e[0]||(e[0]=m(l=>w(o)(),["prevent"]))})):T("",!0)]),n(h,{class:"btn-fixed-width",color:"negative",label:"TEST API",icon:"upload",style:{height:"61px"},onClick:e[1]||(e[1]=m(l=>p(),["prevent"]))})]))}};export{O as default};
