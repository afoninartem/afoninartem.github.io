import{A as E,C as A,r as y,j as u,az as f,B as S,F as C,H as c,M as _,G as t,L as d,ad as p,K as k,J as v,P as b,O as g,I as D,ah as x,T as N,V}from"./index.34ec4f39.js";import{Q as q}from"./QTable.dddac1a8.js";import{u as z}from"./dinners-store.8eea2772.js";import"./QSeparator.7f22d13f.js";import"./use-dark.f545a510.js";import"./format.521fb49e.js";import"./scroll.a24f6ae7.js";import"./use-key-composition.e2e6254d.js";const B=E("firedEaters",()=>{const{user:r}=A(),s=y([]),n=y([]);async function m(){await f.get("/get-senesys-records-dates",{headers:{Authorization:`Bearer ${r.token}`}}).then(e=>s.value=e.data.data).catch(e=>console.log(e))}async function a(){await f.post("/check-fired",{},{headers:{Authorization:`Bearer ${r.token}`}}).then(e=>console.log(e))}async function o(){await f.get("/get-fired-eaters",{headers:{Authorization:`Bearer ${r.token}`}}).then(e=>n.value=e.data.data).catch(e=>console.log(e))}const h=u(()=>s.value),l=u(()=>n.value);return{getFirstAndLastSenesysRecordsDates:m,rangeEdges:h,checkFired:a,getFired:o,firedEaters:l}});const L={class:"fired-eaters"},M=p("h4",null,"\u041F\u043E\u0438\u0441\u043A \u0443\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0445",-1),R={key:0},T=p("br",null,null,-1),P={key:2,class:"table"},U={__name:"FiredEatersPage",setup(r){const{getFirstAndLastSenesysRecordsDates:s,checkFired:n,getFired:m}=B(),{rangeEdges:a,firedEaters:o}=S(B()),{loadedDateRange:h}=z(),l=u(()=>Boolean(a.value.length&&h.length)),e=u(()=>o.value?o.value.map(i=>({name:i.Name,company:i.Company,month:"-",dinners:i.Marks.length})):[]),F=[{name:"company",required:!0,label:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",field:"company",align:"left",sortable:!0},{name:"name",required:!0,label:"\u0424\u0418\u041E",field:"name",align:"left",sortable:!0},{name:"month",required:!0,label:"\u041C\u0435\u0441\u044F\u0446",field:"month",align:"left",sortable:!0},{name:"dinners",required:!0,label:"\u041E\u0431\u0435\u0434\u044B",field:"dinners",align:"left",sortable:!0}];return C(()=>{s(),m()}),(i,Q)=>{const w=V("router-link");return c(),_("div",L,[M,t(l)?g("",!0):(c(),_("p",R,[d("\u0414\u043B\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 "),p("span",null,[k(w,{to:"/maintenance/dinners"},{default:v(()=>[d("\u041E\u0431\u0435\u0434\u044B")]),_:1})]),d(" \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u0437 Senesys \u0441 "+b(t(a)[0])+" \u043F\u043E "+b(t(a)[1]),1)])),t(l)?(c(),D(N,{key:1,color:"secondary",onClick:x(t(n),["prevent"])},{default:v(()=>[d("\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0443\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0445")]),_:1},8,["onClick"])):g("",!0),T,t(e).length?(c(),_("div",P,[k(q,{title:"\u0423\u0432\u043E\u043B\u0435\u043D\u043D\u044B\u0435",rows:t(e),columns:F,"row-key":"name","hide-bottom":""},null,8,["rows"])])):g("",!0)])}}};export{U as default};
