import{X as B,D as L,r as x,a as S,ao as P,s as R,p as n,y as l,ad as e,B as a,F as _,z as f,aL as T,x as D,u as r,A as k,_ as C,ae as I,q as N,aM as z,aN as E}from"./index.4bf09933.js";import{u as F}from"./leftDrawer-store.104247b5.js";const A=B("shipment",()=>{const{user:t}=L(),{closeLeftDrawer:b}=F(),u=x(null),o=S(()=>u.value),h=()=>{var s;return(s=u.value)!=null&&s.spbnn.exists?"spbnn":"msc"},v=[{label:"\u2116",field:"num"},{label:"\u041C\u0430\u0448\u0438\u043D\u0430",field:"transport"},{label:"\u0421\u0430\u043B\u043E\u043D",field:"shop"},{label:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",field:"materials"},{label:"\u041F/\u041F",field:"shipment_places"},{label:"\u0417\u0430\u044F\u0432\u043A\u0438",field:"orders"}],d=S(()=>v.map(s=>({name:s.field,required:!0,label:s.label,field:s.field,align:"left",sortable:!1}))),i=S(()=>u.value.table),$=async()=>{await P.get("/warehouse/shipment/show",{headers:{Authorization:`Bearer ${t.token}`}}).then(s=>u.value=s.data.data).catch(s=>console.log(s))},m=S(()=>{if(!o.value)return 0;let s,y;const c=o.value.vtl.filter(g=>g.name=="\u0428\u043E\u043A\u043E\u043B\u0430\u0434 \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C 5 \u0433\u0440.");return c.length>0&&(s=c[0],y=s.amount/250),y});return{shipment:o,columns:d,rows:i,tubuses:m,show:$,print:async()=>{b(),setTimeout(()=>window.print(),1)},defaultRegion:h}});const V={class:"shipment-total"},q={key:0},M="\u0428\u043E\u043A\u043E\u043B\u0430\u0434 \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C 5 \u0433\u0440.",X={__name:"ShipmentTotal",setup(t){const{shipment:b,tubuses:u}=R(A()),o=h=>h.includes("TREAT")||h.includes("PAPER")?"font-weight: 700":null;return(h,v)=>(n(),l("div",V,[e("h6",null,"\u0412\u0441\u0435\u0433\u043E \u0432 \u0441\u0431\u043E\u0440\u043A\u0435 "+a(new Date().toLocaleDateString())+":",1),e("ol",null,[(n(!0),l(_,null,f(r(b).vtl,(d,i)=>(n(),l("li",{key:`tl-${i}`},[e("p",{style:T(o(d.code))},[D(a(d.name)+" - "+a(d.amount),1),d.name==M?(n(),l("span",q," (\u0432 \u0442\u0443\u0431\u0430\u0445 - "+a(r(u))+")",1)):k("",!0)],4)]))),128))])]))}};const w=t=>(z("data-v-4281a634"),t=t(),E(),t),j={key:0,class:"shipment"},G={class:"warning"},H=w(()=>e("p",null,"\u0412\u0441\u0435 \u0442\u0443\u0431\u044B c \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043E\u043C \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0441\u0431\u043E\u043A\u0443 \u043F\u0440\u043E\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0434\u0430\u0442\u043E\u0439! \u0414\u0430, \u0410\u043B\u0435\u043A\u0441\u0435\u0439, \u0434\u0430\u0436\u0435 \u0435\u0441\u043B\u0438 \u0430\u043A\u0446\u0438\u044F \u0438 \u0440\u0430\u0431\u043E\u0442\u044B \u043C\u043D\u043E\u0433\u043E.",-1)),J={class:"region-btns"},K=["onClick"],O={class:"print-area"},Q={class:"shipment__info"},U=w(()=>e("thead",null,[e("tr",null,[e("th",{class:"header rownum"},"\u2116"),e("th",{class:"header transport"},"\u041C\u0430\u0448\u0438\u043D\u0430"),e("th",{class:"header shop"},"\u0421\u0430\u043B\u043E\u043D"),e("th",{class:"header materials"},"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B"),e("th",{class:"header places"},"\u041F/\u041F"),e("th",{class:"header orders"},"\u0417\u0430\u044F\u0432\u043A\u0438")])],-1)),W=w(()=>e("td",{class:"rownum"},null,-1)),Y={class:"transport"},Z={class:"shop"},ee={class:"materials"},te={key:0,style:{border:"3px double"}},se=w(()=>e("td",null,null,-1)),ne={class:"orders"},le={__name:"ShipmentTableProps",props:["shipment"],setup(t){const{defaultRegion:b,tubuses:u}=A();let o=x(b());const h={msc:"\u041C\u043E\u0441\u043A\u0432\u0430 \u0438 \u041F\u0440\u043E\u0447\u0438\u0435 \u0440\u0435\u0433\u0438\u043E\u043D\u044B",spb:"\u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",nn:"\u041D\u0438\u0436\u043D\u0438\u0439 \u041D\u043E\u0432\u0433\u043E\u0440\u043E\u0434 \u0438 \u043F\u0440\u0438\u043B\u0435\u0436\u0430\u0449\u0438\u0435 \u0440\u0435\u0433\u0438\u043E\u043D\u044B",spbnn:"\u0421\u041F\u0411 + \u041D\u041D"},v=i=>{o.value=i},d=i=>i.length==0?"#fff":`backgound-color: ${i.toLowerCase().includes("213 \u0441\u043E\u0431\u0440\u0430\u043D")?"#53DF00":null}`;return(i,$)=>t.shipment?(n(),l("div",j,[e("div",G,[H,e("p",null,"\u0421\u0435\u0433\u043E\u0434\u043D\u044F \u043F\u043E\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u044D\u0442\u0438\u043A\u0435\u0442\u043E\u043A \u0441 \u0434\u0430\u0442\u043E\u0439: "+a(r(u))+".",1)]),e("div",J,[(n(!0),l(_,null,f(t.shipment,(m,p)=>(n(),l("div",{class:"region-btns__btn",key:m},[t.shipment[p].exists?(n(),l("button",{key:0,onClick:I(s=>v(p),["prevent"])},a(h[p]),9,K)):k("",!0)]))),128))]),e("div",O,[e("div",Q,[e("p",null,"\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 "+a(t.shipment[r(o)].shipment_info.shipment_date),1),e("p",null,"\u0421\u0431\u043E\u0440\u043A\u0430 "+a(t.shipment[r(o)].shipment_info.gathering_date),1),e("p",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0430\u0431\u043E\u0442\u044B "+a(t.shipment[r(o)].shipment_info.start_time),1),e("p",null,"\u0420\u0435\u0433\u0438\u043E\u043D: "+a(t.shipment[r(o)].shipment_info.region),1),e("p",null,"\u0417\u0430\u044F\u0432\u043E\u043A: "+a(t.shipment[r(o)].shipment_info.orders_number),1),e("p",null,"\u0421\u0430\u043B\u043E\u043D\u043E\u0432: "+a(t.shipment[r(o)].shipment_info.shops_number),1)]),e("table",null,[U,(n(!0),l(_,null,f(t.shipment[r(o)].shipment_data.transport,(m,p)=>(n(),l("tbody",{class:"table-body",key:`t-${p}`},[(n(!0),l(_,null,f(m.shops,(s,y)=>(n(),l("tr",{key:`s-${y}`},[W,e("td",Y,a(m.name),1),e("td",Z,a(s.name),1),e("td",null,[e("div",ee,[(n(!0),l(_,null,f(s.materials,(c,g)=>(n(),l("div",{class:"material",key:`m-${g}`},[e("p",null,[c.cabinet?(n(),l("span",te,"213")):k("",!0),D(" "+a(c.name)+" - ",1),e("strong",null,a(c.amount),1)])]))),128))])]),se,e("td",null,[e("div",ne,[(n(!0),l(_,null,f(s.orders,(c,g)=>(n(),l("p",{key:`${p}${y}${g}`,style:T(d(c.comment))},a(c.number),5))),128))])])]))),128))]))),128))]),t.shipment?(n(),N(X,{key:0})):k("",!0)])])):k("",!0)}};var re=C(le,[["__scopeId","data-v-4281a634"]]);export{re as S,A as u};
