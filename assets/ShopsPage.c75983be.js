import{A as F,C as M,r as k,k as u,ao as b,B as $,F as R,G as d,H as m,I as S,J as l,K as e,T as v,O as z,u as T,h as P,x as U,z as I,M as N,L as x,ad as A,P as B,az as O}from"./index.1a2ebdf4.js";import{Q as D}from"./QTable.97eaf641.js";import{Q as j}from"./QTooltip.83773f66.js";import{u as E,a as G}from"./use-dark.70770810.js";import{Q as V}from"./QCardSection.d3edf523.js";import{Q as q,a as H}from"./QTd.34831696.js";import{Q as J}from"./QCard.508c7761.js";import{Q as K}from"./QDialog.621b2e68.js";import"./use-prevent-scroll.ea7ea274.js";import"./scroll.b919e208.js";import"./use-form.e7390af2.js";import"./QChip.9efb0dd2.js";import"./use-key-composition.0b799554.js";import"./format.3e32b8d9.js";import"./QLinearProgress.c033aad4.js";import"./position-engine.61fd986d.js";import"./selection.b12b0e35.js";const w=F("shops",()=>{const{user:c}=M(),n=k(null),a=k(!1),o=k(null),p=u(()=>a.value),h=u(()=>n.value),f=u(()=>o.value),i=u(()=>o.value.name),C=u(()=>{let r=[];for(let t in o.value)r.push({\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440:t,\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435:o.value[t]});return r});return{getShops:async()=>{await b.get("/shops",{headers:{Authorization:`Bearer ${c.token}`}}).then(r=>{n.value=r.data.data}).catch(r=>console.log(r))},addShop:async r=>{await b.post("/shops/new",{shop:r},{headers:{Authorization:`Bearer ${c.token}`}}).then(t=>console.log(t)).catch(t=>console.log(t))},updateShop:async r=>{await b.post("/shops/update",{shop:r},{headers:{Authorization:`Bearer ${c.token}`}}).then(t=>console.log(t)).catch(t=>console.log(t))},shops:h,dialogState:p,openShopCard:(r,t)=>{o.value=t,a.value=!0},closeShopCard:()=>{a.value=!1,o.value=null},shopCard:C,shopCardName:i,shopCardModel:f}}),L={__name:"ShopsTable",setup(c){const{getShops:n,openShopCard:a}=w(),{shops:o}=$(w()),p=["name","region","email","status","coffee_machine"],h=u(()=>p.map(i=>({name:i,required:!0,label:i,field:i,align:"left",sortable:!0}))),f={page:1,rowsPerPage:0};return R(()=>{n()}),(i,C)=>d(o)?(m(),S(D,{key:0,title:"\u041F\u0435\u0440\u0435\u0447\u0435\u043D\u044C \u0444\u0438\u0440\u043C\u0435\u043D\u043D\u044B\u0445 \u0441\u0430\u043B\u043E\u043D\u043E\u0432",rows:d(o),columns:h.value,class:"my-sticky-header-table",onRowClick:d(a),"row-key":"name",pagination:f},{"top-right":l(_=>[e(v,{icon:"download",label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",color:"primary"}),e(v,{flat:"",round:"",dense:"",icon:_.inFullscreen?"fullscreen_exit":"fullscreen",onClick:_.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),_:1},8,["rows","columns","onRowClick"])):z("",!0)}},W=T("div",{class:"q-space"});var X=P({name:"QSpace",setup(){return()=>W}}),Y=P({name:"QBar",props:{...E,dense:Boolean},setup(c,{slots:n}){const{proxy:{$q:a}}=I(),o=G(c,a),p=u(()=>`q-bar row no-wrap items-center q-bar--${c.dense===!0?"dense":"standard"}  q-bar--${o.value===!0?"dark":"light"}`);return()=>T("div",{class:p.value,role:"toolbar"},U(n.default))}});const Z={class:"shop-card"},ee={class:"text-h6"},oe={__name:"ShopCard",setup(c){const{dialogState:n,shopCard:a,shopCardName:o,shopCardModel:p}=$(w()),{closeShopCard:h}=w(),f=k(!0),i=k(p),C=u(()=>Object.keys(a.value[0]).map(g=>({name:g,required:!0,label:g,field:g,align:"left",sortable:!0}))),_={page:1,rowsPerPage:0};return(g,y)=>(m(),N("div",Z,[e(K,{modelValue:d(n),"onUpdate:modelValue":y[0]||(y[0]=s=>O(n)?n.value=s:null),persistent:"",maximized:f.value,"transition-show":"slide-left","transition-hide":"slide-left"},{default:l(()=>[e(J,null,{default:l(()=>[e(Y,null,{default:l(()=>[e(X),e(v,{dense:"",flat:"",icon:"close",onClick:d(h)},{default:l(()=>[e(j,{class:"bg-white text-primary"},{default:l(()=>[x("\u0417\u0430\u043A\u0440\u044B\u0442\u044C")]),_:1})]),_:1},8,["onClick"])]),_:1}),e(V,null,{default:l(()=>[A("div",ee,"\u0424\u0438\u0440\u043C\u0435\u043D\u043D\u044B\u0439 \u0441\u0430\u043B\u043E\u043D "+B(d(o)),1)]),_:1}),e(V,{class:"q-pt-none"},{default:l(()=>[d(a)?(m(),S(D,{key:0,dense:"",title:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",rows:d(a),columns:C.value,"hide-bottom":"",class:"my-sticky-header-table","row-key":"name",pagination:_},{"top-right":l(s=>[e(v,{flat:"",round:"",color:"secondary",icon:"cloud_upload"}),e(v,{flat:"",round:"",dense:"",icon:s.inFullscreen?"fullscreen_exit":"fullscreen",onClick:s.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),"body-cell-\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435":l(s=>[typeof s.row.\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435=="boolean"?(m(),S(q,{key:0,props:s},{default:l(()=>[e(H,{modelValue:i.value[s.row.\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440],"onUpdate:modelValue":Q=>i.value[s.row.\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440]=Q,size:"xs",color:"green"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])):(m(),S(q,{key:1,props:s},{default:l(()=>[x(B(s.row.\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435),1)]),_:2},1032,["props"]))]),_:1},8,["rows","columns"])):z("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]))}},ae={class:"shops"},se=A("h3",null,"\u0424\u0421",-1),Se={__name:"ShopsPage",setup(c){return(n,a)=>(m(),N("div",ae,[se,e(L),e(oe)]))}};export{Se as default};
