import{X as R,D as E,r as N,a as w,ao as x,s as T,p as n,y as a,ad as e,B as o,u as c,F as f,z as b,aL as B,_ as z,x as S,v as I,aM as U,aN as V,m as M,A as $,q as A,E as P}from"./index.36d0b482.js";import{u as q}from"./leftDrawer-store.bf99a582.js";const y=R("shipment",()=>{const{user:i}=E(),{closeLeftDrawer:s}=q(),l=N(null),r=w(()=>l.value),_=w(()=>{const t=new Date;return t.setDate(t.getDate()+1),`\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 ${l.value?new Date(l.value.info.shipment_date).toLocaleDateString():t.toLocaleDateString()}`}),d=[{label:"\u2116",field:"num"},{label:"\u041C\u0430\u0448\u0438\u043D\u0430",field:"transport"},{label:"\u0421\u0430\u043B\u043E\u043D",field:"shop"},{label:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",field:"materials"},{label:"\u041F/\u041F",field:"shipment_places"},{label:"\u0417\u0430\u044F\u0432\u043A\u0438",field:"orders"}],u=w(()=>d.map(t=>({name:t.field,required:!0,label:t.label,field:t.field,align:"left",sortable:!1}))),h=w(()=>l.value.table);return{shipment:r,columns:u,rows:h,tableTitle:_,show:async()=>{await x.get("/warehouse/shipment/show",{headers:{Authorization:`Bearer ${i.token}`}}).then(t=>l.value=t.data.data).catch(t=>console.log(t))},download:async()=>{await x.get("/warehouse/shipment/download",{headers:{Authorization:`Bearer ${i.token}`},responseType:"blob"}).then(t=>{const C=t.headers.get("Content-Type");console.log(C);const k="\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 \u0422\u0430\u043A\u043E\u0435\u0422\u043E\u0427\u0438\u0441\u043B\u043E.pdf";console.log(k);const L=URL.createObjectURL(t.data),m=document.createElement("a");m.href=L,m.download=k,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(L)}).catch(t=>console.log(t))},print:async()=>{s(),setTimeout(()=>window.print(),1)}}});const F={class:"shipment-total"},X={__name:"ShipmentTotal",setup(i){const{shipment:s}=T(y()),l=r=>r.includes("TREAT")||r.includes("PAPER")?"font-weight: 700":null;return(r,_)=>(n(),a("div",F,[e("h6",null,"\u0412\u0441\u0435\u0433\u043E \u0432 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0435 \u043D\u0430 "+o(new Date(c(s).info.shipment_date).toLocaleDateString())+":",1),e("ol",null,[(n(!0),a(f,null,b(c(s).info.total_list,(d,u)=>(n(),a("li",{key:`tl-${u}`},[e("p",{style:B(l(d.code))},o(d.name)+" - "+o(d.amount),5)]))),128))])]))}};const D=i=>(U("data-v-1ba0ad04"),i=i(),V(),i),j={class:"shipment"},H={class:"shipment__info"},O=D(()=>e("thead",null,[e("tr",null,[e("th",{class:"header rownum"},"\u2116"),e("th",{class:"header transport"},"\u041C\u0430\u0448\u0438\u043D\u0430"),e("th",{class:"header shop"},"\u0421\u0430\u043B\u043E\u043D"),e("th",{class:"header materials"},"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B"),e("th",{class:"header places"},"\u041F/\u041F"),e("th",{class:"header orders"},"\u0417\u0430\u044F\u0432\u043A\u0438")])],-1)),Q=D(()=>e("td",{class:"rownum"},null,-1)),G={class:"transport"},Y={class:"shop"},J={class:"materials"},K=D(()=>e("td",null,null,-1)),W={class:"orders"},Z={__name:"ShipmentTable",setup(i){const{shipment:s}=T(y()),l=r=>r.length==0?"#fff":`backgound-color: ${r.toLowerCase().includes("213 \u0441\u043E\u0431\u0440\u0430\u043D")?"#53DF00":null}`;return(r,_)=>(n(),a("div",j,[e("div",H,[e("p",null,"\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 "+o(new Date(c(s).info.shipment_date).toLocaleDateString()),1),e("p",null,"\u0421\u0431\u043E\u0440\u043A\u0430 "+o(new Date().toLocaleDateString()),1),e("p",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0430\u0431\u043E\u0442\u044B "+o(new Date().toLocaleTimeString("ru-RU")),1),e("p",null,[e("strong",null,o(c(s).info.region),1)]),e("p",null,"\u0417\u0430\u044F\u0432\u043E\u043A: "+o(c(s).info.orders_number),1),e("p",null,"\u0421\u0430\u043B\u043E\u043D\u043E\u0432: "+o(c(s).info.shops_number),1)]),e("table",null,[O,(n(!0),a(f,null,b(c(s).data.transport,(d,u)=>(n(),a("tbody",{class:"table-body",key:`${u}`},[(n(!0),a(f,null,b(d.shops,(h,g)=>(n(),a("tr",{key:`${u}${g}`},[Q,e("td",G,o(d.name),1),e("td",Y,o(h.name),1),e("td",null,[e("div",J,[(n(!0),a(f,null,b(h.materials,(p,v)=>(n(),a("div",{class:"material",key:`${u}${g}${v}`},[e("p",null,[S(o(p.name)+" - ",1),e("strong",null,o(p.amount),1)])]))),128))])]),K,e("td",null,[e("div",W,[(n(!0),a(f,null,b(h.orders,(p,v)=>(n(),a("p",{key:`${u}${g}${v}`,style:B(l(p.comment))},o(p.name),5))),128))])])]))),128))]))),128))]),I(X)]))}};var ee=z(Z,[["__scopeId","data-v-1ba0ad04"]]);const te={class:"container"},ne=e("h4",null,"\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430",-1),se={key:0,class:"no-shipment"},oe=e("p",null,"\u0412\u044B\u0433\u0440\u0443\u0437\u0438\u0442\u044C C\u043A\u043B\u0430\u0434\u0441\u043A\u043E\u0439 \u0443\u0447\u0435\u0442 \u041C\u041F\u0417 \u043F\u043E \u0432\u0441\u0435\u043C \u043D\u0430\u0448\u0438\u043C \u043F\u0430\u043F\u043A\u0430\u043C \u0438\u0437 1\u04217.7 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 TXT.",-1),ae=e("p",null,"\u0412\u044B\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0410\u043D\u0430\u043B\u0438\u0437 \u0440\u0435\u043A\u043B\u0430\u043C\u0430\u0446\u0438\u0439 \u043F\u043E \u0440\u0435\u043A\u043B\u0430\u043C\u0435 \u0438\u0437 1\u04217.7 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 TXT.",-1),le=e("p",null,[S("\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0435 "),e("span",null,[e("a",{href:"https://drive.google.com/file/d/13G1ET3-3M4mMpzbsI2N6V8ThQHvDYA4f/view?usp=sharing"},"\u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435")]),S(" ArtisHelper.exe")],-1),re=e("p",null,"\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B \u043D\u0430 \u043E\u0442\u043A\u0440\u044B\u0432\u0448\u0435\u0435\u0441\u044F \u043E\u043A\u043D\u043E \u0438 \u0441\u043B\u0435\u0434\u043E\u0432\u0430\u0442\u044C \u0438\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u044F\u043C.",-1),ce=[oe,ae,le,re],ue={__name:"ShipmentPage",setup(i){const{shipment:s}=T(y()),{show:l,print:r}=y();return M(()=>l()),(_,d)=>(n(),a("div",te,[ne,c(s)?$("",!0):(n(),a("div",se,ce)),c(s)?(n(),A(P,{key:1,class:"q-mb-lg",label:"\u0420\u0430\u0441\u043F\u0435\u0447\u0430\u0442\u0430\u0442\u044C",icon:"print",color:"positive",onClick:c(r)},null,8,["onClick"])):$("",!0),c(s)?(n(),A(ee,{key:2,class:"print-area"})):$("",!0)]))}};export{ue as default};
