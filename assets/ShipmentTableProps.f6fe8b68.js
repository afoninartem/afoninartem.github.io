import{X as C,D as E,r as w,a as D,ao as I,p as s,y as n,ad as e,B as l,F as f,z as b,aL as P,x as S,A as g,_ as N,o as R,ae as z,u as d,q as F,aM as M,aN as V}from"./index.960d3e0a.js";import{u as q}from"./leftDrawer-store.3d4847ea.js";const j=C("shipment",()=>{const{user:t}=E(),{closeLeftDrawer:c}=q(),u=w(null),h=D(()=>u.value),m=()=>{var o;return(o=u.value)!=null&&o.spbnn.exists?"spbnn":"msc"},a=[{label:"\u2116",field:"num"},{label:"\u041C\u0430\u0448\u0438\u043D\u0430",field:"transport"},{label:"\u0421\u0430\u043B\u043E\u043D",field:"shop"},{label:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",field:"materials"},{label:"\u041F/\u041F",field:"shipment_places"},{label:"\u0417\u0430\u044F\u0432\u043A\u0438",field:"orders"}],v=D(()=>a.map(o=>({name:o.field,required:!0,label:o.label,field:o.field,align:"left",sortable:!1}))),x=D(()=>u.value.table);return{shipment:h,columns:v,rows:x,show:async()=>{await I.get("/warehouse/shipment/show",{headers:{Authorization:`Bearer ${t.token}`}}).then(o=>u.value=o.data.data).catch(o=>console.log(o))},print:async()=>{c(),setTimeout(()=>window.print(),1)},defaultRegion:m}});const O={class:"shipment-total"},X={key:0},G="\u0428\u043E\u043A\u043E\u043B\u0430\u0434 \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C 5 \u0433\u0440.",H={__name:"ShipmentTotal",props:["shipment","tubuses"],setup(t){const c=t,u=h=>h.includes("TREAT")||h.includes("PAPER")?"font-weight: 700":null;return(h,m)=>(s(),n("div",O,[e("h6",null,"\u0412\u0441\u0435\u0433\u043E \u0432 \u0441\u0431\u043E\u0440\u043A\u0435 "+l(new Date().toLocaleDateString())+":",1),e("ol",null,[(s(!0),n(f,null,b(t.shipment.vtl,(a,v)=>(s(),n("li",{key:`tl-${v}`},[e("p",{style:P(u(a.code))},[S(l(a.name)+" - "+l(a.amount),1),a.name==G?(s(),n("span",X," (\u0432 \u0442\u0443\u0431\u0430\u0445 - "+l(c.tubuses)+")",1)):g("",!0)],4)]))),128))])]))}};const $=t=>(M("data-v-05c0f289"),t=t(),V(),t),J={key:0,class:"shipment"},K={class:"warning"},Q=$(()=>e("p",null,"\u0412\u0441\u0435 \u0442\u0443\u0431\u044B c \u0448\u043E\u043A\u043E\u043B\u0430\u0434\u043E\u043C \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0441\u0431\u043E\u043A\u0443 \u043F\u0440\u043E\u043C\u0430\u0440\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0434\u0430\u0442\u043E\u0439! \u0414\u0430, \u0410\u043B\u0435\u043A\u0441\u0435\u0439, \u0434\u0430\u0436\u0435 \u0435\u0441\u043B\u0438 \u0430\u043A\u0446\u0438\u044F \u0438 \u0440\u0430\u0431\u043E\u0442\u044B \u043C\u043D\u043E\u0433\u043E.",-1)),U={class:"region-btns"},W=["onClick"],Y={class:"print-area"},Z={class:"shipment__info"},ee=$(()=>e("thead",null,[e("tr",null,[e("th",{class:"header rownum"},"\u2116"),e("th",{class:"header transport"},"\u041C\u0430\u0448\u0438\u043D\u0430"),e("th",{class:"header shop"},"\u0421\u0430\u043B\u043E\u043D"),e("th",{class:"header materials"},"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B"),e("th",{class:"header places"},"\u041F/\u041F"),e("th",{class:"header orders"},"\u0417\u0430\u044F\u0432\u043A\u0438")])],-1)),te=$(()=>e("td",{class:"rownum"},null,-1)),se={class:"transport"},ne={class:"shop"},le={class:"materials"},ae={key:0,style:{border:"3px double"}},oe=$(()=>e("td",null,null,-1)),re={class:"orders"},ie={__name:"ShipmentTableProps",props:["shipment"],setup(t){const c=t,{defaultRegion:u}=j();let h=w(null);const m=w(null);let a=w(u());const v={msc:"\u041C\u043E\u0441\u043A\u0432\u0430 \u0438 \u041F\u0440\u043E\u0447\u0438\u0435 \u0440\u0435\u0433\u0438\u043E\u043D\u044B",spb:"\u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",nn:"\u041D\u0438\u0436\u043D\u0438\u0439 \u041D\u043E\u0432\u0433\u043E\u0440\u043E\u0434 \u0438 \u043F\u0440\u0438\u043B\u0435\u0436\u0430\u0449\u0438\u0435 \u0440\u0435\u0433\u0438\u043E\u043D\u044B",spbnn:"\u0421\u041F\u0411 + \u041D\u041D"},x=()=>{let i={};Object.keys(c.shipment).forEach(r=>{c.shipment[r]&&c.shipment[r].exists&&(i[r]=c.shipment[r])}),h.value=i},A=()=>{let i;const y=c.shipment.vtl.filter(r=>r.name=="\u0428\u043E\u043A\u043E\u043B\u0430\u0434 \u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u043E\u043C 5 \u0433\u0440.");y.length>0&&(i=y[0].amount/250),m.value=i},B=i=>{a.value=i},o=i=>i.length==0?"#fff":`backgound-color: ${i.toLowerCase().includes("213 \u0441\u043E\u0431\u0440\u0430\u043D")?"#53DF00":null}`;return R(()=>{x(),A()}),(i,y)=>t.shipment?(s(),n("div",J,[e("div",K,[Q,e("p",null,[S("\u0421\u0435\u0433\u043E\u0434\u043D\u044F \u043F\u043E\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u044D\u0442\u0438\u043A\u0435\u0442\u043E\u043A \u0441 \u0434\u0430\u0442\u043E\u0439: "),e("b",null,l(m.value),1),S(".")])]),e("div",U,[(s(!0),n(f,null,b(d(h),(r,p)=>(s(),n("div",{class:"region-btns__btn",key:`reg-btn-${r}`},[t.shipment[p].exists?(s(),n("button",{key:0,onClick:z(k=>B(p),["prevent"])},l(v[p]),9,W)):g("",!0)]))),128))]),e("div",Y,[e("div",Z,[e("p",null,"\u041E\u0442\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 "+l(t.shipment[d(a)].shipment_info.shipment_date),1),e("p",null,"\u0421\u0431\u043E\u0440\u043A\u0430 "+l(t.shipment[d(a)].shipment_info.gathering_date),1),e("p",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0430\u0431\u043E\u0442\u044B "+l(t.shipment[d(a)].shipment_info.start_time),1),e("p",null,"\u0420\u0435\u0433\u0438\u043E\u043D: "+l(t.shipment[d(a)].shipment_info.region),1),e("p",null,"\u0417\u0430\u044F\u0432\u043E\u043A: "+l(t.shipment[d(a)].shipment_info.orders_number),1),e("p",null,"\u0421\u0430\u043B\u043E\u043D\u043E\u0432: "+l(t.shipment[d(a)].shipment_info.shops_number),1)]),e("table",null,[ee,(s(!0),n(f,null,b(t.shipment[d(a)].shipment_data.transport,(r,p)=>(s(),n("tbody",{class:"table-body",key:`t-${p}`},[(s(!0),n(f,null,b(r.shops,(k,L)=>(s(),n("tr",{key:`s-${L}`},[te,e("td",se,l(r.name),1),e("td",ne,l(k.name),1),e("td",null,[e("div",le,[(s(!0),n(f,null,b(k.materials,(_,T)=>(s(),n("div",{class:"material",key:`m-${T}`},[e("p",null,[_.cabinet?(s(),n("span",ae,"213")):g("",!0),S(" "+l(_.name)+" - ",1),e("strong",null,l(_.amount),1)])]))),128))])]),oe,e("td",null,[e("div",re,[(s(!0),n(f,null,b(k.orders,(_,T)=>(s(),n("p",{key:`${p}${L}${T}`,style:P(o(_.comment))},l(_.number),5))),128))])])]))),128))]))),128))]),t.shipment&&t.shipment.vtl?(s(),F(H,{key:0,shipment:t.shipment,tubuses:m.value},null,8,["shipment","tubuses"])):g("",!0)])])):g("",!0)}};var he=N(ie,[["__scopeId","data-v-05c0f289"]]);export{he as S,j as u};
