import{Z as A,D as F,r as p,a as f,aq as S,s as x,p as C,q as R,t as r,v as t,u as o,E as h,y as w,x as U,af as b,aF as M}from"./index.c3cfba11.js";import{Q as N}from"./QTable.674f18e2.js";import{Q as P,a as D}from"./QBar.549f22ad.js";import{Q as E}from"./QTooltip.933a5eda.js";import{Q as L,a as V}from"./QCard.f2217786.js";import{Q as v}from"./QInput.4498ddcb.js";import{Q as I}from"./QForm.7787e98f.js";import{Q as Z}from"./QDialog.17a066c7.js";import"./QSeparator.ac037230.js";import"./use-dark.fa8ed8af.js";import"./QList.362e587b.js";import"./scroll.ced05353.js";import"./private.use-form.d4fcf8be.js";import"./QChip.0df8d594.js";import"./QItem.2da5c940.js";import"./QMenu.ceed13a6.js";import"./position-engine.cf3daaa6.js";import"./selection.6a5979cc.js";import"./use-key-composition.43d208a5.js";import"./format.de7e9769.js";import"./QLinearProgress.4083751b.js";import"./use-file-dom-props.5b1dd429.js";import"./use-prevent-scroll.3d2aa9e1.js";const g=A("shopStatuses",()=>{const{user:c}=F(),n=p([]),e=p(!1),i=p(null),_=p(["\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"]),m=p([]),d={status:"",title:"",capture:""},u=f(()=>n.value),s=f(()=>e.value),a=f(()=>i.value),y=f(()=>_.value.concat(n.value.map(l=>l.title))),B=f(()=>m.value),q=()=>{e.value=!0,i.value={...d}},$=()=>{e.value=!1},z=()=>{i.value={...d}},T=async l=>{await S.post("/admin/shopstatus/new",{...a.value},{headers:{Authorization:`Bearer ${c.token}`}}).then(k=>{Q(),e.value=!1}).catch(k=>console.log(k))},Q=async()=>{await S.get("/admin/shopstatus/all",{headers:{Authorization:`Bearer ${c.token}`}}).then(l=>n.value=l.data.data).catch(l=>console.log(l))};return{statuses:u,dialogState:s,statusCard:a,titles:y,limitedMaterials:B,addStatus:T,openStatusCard:q,resetCard:z,closeStatusCard:$,getAllStatuses:Q,getLimitedMaterials:async()=>{await S.get("/admin/shopstatus/limits",{headers:{Authorization:`Bearer ${c.token}`}}).then(l=>m.value=l.data.data).catch(l=>console.log(l))}}}),j={__name:"ShopStatusTable",setup(c){const{statuses:n,titles:e}=x(g()),{openStatusCard:i}=g(),_=f(()=>e.value.map(u=>({name:u,required:!0,label:u,field:u,align:"left",sortable:!0}))),m=[],d={page:1,rowsPerPage:0};return(u,s)=>(C(),R(N,{title:"\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F \u043D\u0430 \u043E\u0442\u0433\u0440\u0443\u0437\u043A\u0443 \u043F\u043E \u0441\u0442\u0430\u0442\u0443\u0441\u0443",rows:m,columns:_.value,class:"my-sticky-header-table","row-key":"name",pagination:d},{"top-right":r(a=>[t(h,{icon:"add",class:"q-ml-sm",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441",color:"positive",onClick:o(i)},null,8,["onClick"]),t(h,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),_:1},8,["columns"]))}},G={class:"container"},H=b("h4",null,"\u041D\u043E\u0432\u044B\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",-1),J={class:"btn-block"},K={__name:"ShopStatusCard",setup(c){const{dialogState:n,statusCard:e}=x(g()),{closeStatusCard:i,resetCard:_,addStatus:m}=g(),d=p(!0);return(u,s)=>(C(),w("div",G,[t(Z,{modelValue:o(n),"onUpdate:modelValue":s[3]||(s[3]=a=>M(n)?n.value=a:null),persistent:"",maximized:d.value,"transition-show":"slide-left","transition-hide":"slide-left"},{default:r(()=>[t(L,null,{default:r(()=>[t(P,null,{default:r(()=>[t(D),t(h,{dense:"",flat:"",icon:"close",onClick:o(i)},{default:r(()=>[t(E,{class:"bg-white text-primary"},{default:r(()=>[U("\u0417\u0430\u043A\u0440\u044B\u0442\u044C")]),_:1})]),_:1},8,["onClick"])]),_:1}),t(V,null,{default:r(()=>[H]),_:1}),t(V,{class:"q-pt-none"},{default:r(()=>[t(I,{onSubmit:o(m),onReset:o(_),class:"q-gutter-md"},{default:r(()=>[t(v,{label:"\u0422\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",modelValue:o(e).status,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).status=a),hint:"regular, top, etc"},null,8,["modelValue"]),t(v,{label:"\u0422\u0438\u0442\u0443\u043B\u044C\u043D\u043E\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",modelValue:o(e).title,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).title=a),hint:"\u041E\u0431\u044B\u0447\u043D\u044B\u0439, \u0422\u043E\u043F\u043E\u0432\u044B\u0439 \u0438 \u0442.\u0434."},null,8,["modelValue"]),t(v,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",modelValue:o(e).capture,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).capture=a),hint:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0432\u043D\u044B\u043C"},null,8,["modelValue"]),b("div",J,[t(h,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",type:"submit",color:"positive"}),t(h,{label:"\u0421\u0431\u0440\u043E\u0441",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]))}},O={class:"container"},W=b("h4",null," \u0421\u0442\u0430\u0442\u0443\u0441\u044B \u0424\u0421 ",-1),Qt={__name:"ShopStatusPage",setup(c){return(n,e)=>(C(),w("div",O,[W,t(j),t(K)]))}};export{Qt as default};
