import{_ as U,r as x,H as s,M as r,ad as m,K as t,J as l,Q as S,B as I,j as H,G as d,ap as F,q as M,T as V,ae as $,R as b,N as D,I as g,L as q,P as L,O as y}from"./index.62b09686.js";import{Q as A}from"./QSpinnerCube.c152abae.js";import{u as h}from"./dinners-store.9bd02afd.js";import{Q as B}from"./QFile.70635223.js";import{Q as z,a as G,C as J}from"./ClosePopup.b31ccb4a.js";import{Q as K}from"./QInput.142722da.js";import{Q as O,b as W,a as Y,c as Z}from"./QTabPanels.c85d8666.js";import{k as ee}from"./QDialog.4d957239.js";import{c as te,a as ae,Q as T,b as oe}from"./QList.fc872a7b.js";import{Q as ne}from"./QCard.2279c428.js";import"./QChip.a306cd92.js";import"./use-dark.0e85ba3a.js";import"./use-form.62d1521a.js";import"./use-file-dom-props.946e5f8a.js";import"./format.3e32b8d9.js";import"./use-cache.b0833c75.js";import"./use-key-composition.4fc25fba.js";import"./QResizeObserver.b0baa95c.js";import"./selection.663c804d.js";import"./scroll.a2ecb5a1.js";import"./touch.70a9dd44.js";const se={setup(){const _=x(null),e="dinners",{uploadFile:c}=h();return{file:_,mode:e,uploadFile:c}}},le={class:"q-pa-md"},re={class:"q-gutter-md row items-start"};function ie(_,e,c,a,k,p){return s(),r("div",le,[m("div",re,[t(B,{modelValue:a.file,"onUpdate:modelValue":[e[0]||(e[0]=i=>a.file=i),e[1]||(e[1]=i=>a.uploadFile(a.file,a.mode))],label:"\u041E\u0431\u0435\u0434\u044B Senesys",filled:"","use-chips":"",accept:".xlsx",style:{"max-width":"300px"}},{prepend:l(()=>[t(S,{name:"attach_file"})]),_:1},8,["modelValue"])])])}var de=U(se,[["render",ie]]);const ue={setup(){const _=x(null),e="artis",{uploadFile:c}=h();return{file:_,mode:e,uploadFile:c}}},ce={class:"q-pa-md"},me={class:"q-gutter-md row items-start"};function pe(_,e,c,a,k,p){return s(),r("div",ce,[m("div",me,[t(B,{modelValue:a.file,"onUpdate:modelValue":[e[0]||(e[0]=i=>a.file=i),e[1]||(e[1]=i=>a.uploadFile(a.file,a.mode))],label:"\u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0438 1C7",filled:"","use-chips":"",accept:".xlsx",style:{"max-width":"300px"}},{prepend:l(()=>[t(S,{name:"attach_file"})]),_:1},8,["modelValue"])])])}var _e=U(ue,[["render",pe]]);const fe={class:"q-gutter-y-md dinners__handled-data",style:{"max-width":"500px"}},ve={class:"date-pdf-form"},ye={class:"row items-center justify-end"},he={key:0,class:"department-issues"},ke={__name:"DinnersHandledData",setup(_){const{handledData:e}=I(h()),{download:c,downloadPDF:a,loadedDateRange:k}=h(),p=k,i=p?x(p[p.length-1]):new Date,v=H(()=>new Date(i.value).toLocaleDateString()),Q=x(null),N=Array.from(new Set(e.value.map(u=>u.Company).sort())),w=[];N.forEach((u,n)=>{w[n]={total:0},w[n].company=u}),e.value.forEach(u=>w.filter(n=>n.company==u.Company)[0].total+=u.Marks.length);const P=u=>{let n=!1,o=[];return u=="\u0410\u0440\u0442\u0438\u0441"&&e.value.filter(f=>f.Department=="!\u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435!").length&&(n=!0,o=e.value.filter(f=>f.Department=="!\u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435!")),{show:n,undefinedEaters:o}},R=()=>{const u=new Date(i.value).toLocaleDateString();return a(u)};return(u,n)=>(s(),r("div",fe,[m("div",ve,[t(K,{filled:"",modelValue:d(v),"onUpdate:modelValue":n[1]||(n[1]=o=>F(v)?v.value=o:null),square:"",class:"date-picker"},{append:l(()=>[t(S,{name:"event",class:"cursor-pointer"},{default:l(()=>[t(z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[t(G,{modelValue:d(i),"onUpdate:modelValue":n[0]||(n[0]=o=>F(i)?i.value=o:null),minimal:"",options:d(p)},{default:l(()=>[m("div",ye,[M(t(V,{label:"\u041E\u041A",color:"primary",flat:""},null,512),[[J]])])]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(V,{color:"secondary",label:"PDF",icon:"download",square:"",class:"pdf-btn",onClick:$(R,["prevent"])},null,8,["onClick"])]),t(ne,null,{default:l(()=>[t(O,{modelValue:Q.value,"onUpdate:modelValue":n[2]||(n[2]=o=>Q.value=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[(s(),r(b,null,D(w,(o,f)=>t(W,{key:`label-${f}`,name:o.company,label:`${o.company} (${o.total})`},null,8,["name","label"])),64))]),_:1},8,["modelValue"]),t(ee),t(Y,{modelValue:Q.value,"onUpdate:modelValue":n[3]||(n[3]=o=>Q.value=o),animated:""},{default:l(()=>[(s(),r(b,null,D(w,(o,f)=>t(Z,{key:`panel-${f}`,name:o.company,class:"column"},{default:l(()=>[t(V,{class:"btn-fixed-width",color:"secondary",label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",icon:"download",onClick:$(C=>d(c)(o.company),["prevent"])},null,8,["onClick"]),P(o.company).show?(s(),r("div",he,[t(te,{bordered:"",separator:""},{default:l(()=>[t(ae,null,{default:l(()=>[(s(!0),r(b,null,D(P(o.company).undefinedEaters,(C,E)=>(s(),g(oe,{key:E},{default:l(()=>[t(T,null,{default:l(()=>[q(L(C.Name),1)]),_:2},1024),(s(!0),r(b,null,D(C.Tips,(X,j)=>(s(),g(T,{caption:"",key:`tip-${j}`},{default:l(()=>[q("\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u044D\u0442\u043E "+L(X),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):y("",!0)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})]))}};const Qe={class:"dinners"},we=m("h4",{class:"dinners__title"},"\u041E\u0431\u0435\u0434\u044B",-1),xe={key:0,class:"dinners__description"},be=m("p",null,"\u0414\u043B\u044F \u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043E\u0442\u0447\u0435\u0442\u0430 \u043F\u043E \u043E\u0431\u0435\u0434\u0430\u043C \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B \u0438\u0437 Senesys \u0438 1\u04217.",-1),De=m("p",null,"Seneys \u0432\u044B\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0435 \u0441\u0430\u043C\u0438, \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430\u043C \u0438\u0437 1\u04217 \u0437\u0430\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0435 \u0443 \u0410\u0444\u043E\u043D\u0438\u043D\u0430.",-1),Ve=m("p",null,"\u041F\u0435\u0440\u0435\u0434 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u043E\u0439 \u0444\u0430\u0439\u043B\u043E\u0432 \u0432 \u0425\u0435\u043B\u043F\u0435\u0440 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0445 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 XLSX.",-1),Ce=m("p",null,"\u0414\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u043D\u0430\u0434\u043E \u0438\u0445 \u043E\u0442\u043A\u0440\u044B\u0442\u044C, \u043D\u0430\u0436\u0430\u0442\u044C \u0424\u0430\u0439\u043B - \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A - \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u043E\u0440\u043C\u0430\u0442 XLSX.",-1),$e=[be,De,Ve,Ce],ge={key:1,class:"dinners__upload"},Se={key:3,class:"loader"},Pe={key:4,class:"dinners__result"},Ye={__name:"DinnersPage",setup(_){const e=x(!1),{files:c,hdIsReady:a}=I(h()),{upload:k}=h(),p=()=>{e.value=!0};return(i,v)=>(s(),r("div",Qe,[we,!d(a)&&!e.value?(s(),r("section",xe,$e)):y("",!0),!d(a)&&!e.value?(s(),r("div",ge,[t(de,{class:"up1"}),t(_e,{class:"up2"})])):y("",!0),d(c).dinners&&d(c).artis&&!d(a)&&!e.value?(s(),g(V,{key:2,class:"btn-fixed-width",color:"secondary",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",icon:"upload",onClick:v[0]||(v[0]=$(Q=>{d(k)(),p()},["prevent"]))})):y("",!0),!d(a)&&e.value?(s(),r("div",Se,[t(A,{color:"primary",size:"5.5em"})])):y("",!0),d(a)?(s(),r("section",Pe,[t(ke)])):y("",!0)]))}};export{Ye as default};
