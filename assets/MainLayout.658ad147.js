import{Q as Pe,a as Fe}from"./QLayout.131f4fa5.js";import{Q as oe,a as Re,b as he}from"./QItem.b9e20b27.js";import{c as G,i as ke,e as M,r as x,a as r,w as c,o as Ne,n as be,b as pe,d as Ue,h as B,f as ye,g as se,l as xe,j as Ce,s as le,k as Ee,m as je,u as W,p as T,q as A,t as _,v,x as I,y as E,z as Ge,Q as Je,A as _e,B as ue,F as Ke,C as Xe,D as Ye,E as ie,G as Ze,H as et,_ as tt,I as at,J as ne}from"./index.f7b09357.js";import{Q as ot}from"./QList.8eb3807f.js";import{u as lt,a as nt}from"./use-prevent-scroll.998b213e.js";import{u as rt,a as ut,b as it,c as st}from"./selection.a82ce445.js";import{u as ct,a as dt}from"./use-dark.7584776e.js";import{T as re}from"./TouchPan.5a29bcc9.js";import{b as U}from"./format.3e32b8d9.js";import{u as j}from"./leftDrawer-store.87a3da1c.js";import{Q as ft}from"./QResizeObserver.0b6ff5bd.js";import"./scroll.4fa8745d.js";import"./touch.3df10340.js";const we=150;var vt=G({name:"QDrawer",inheritAttrs:!1,props:{...rt,...ct,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...ut,"onLayout","miniState"],setup(e,{slots:m,emit:i,attrs:w}){const n=Ce(),{proxy:{$q:d}}=n,f=dt(e,d),{preventBodyScroll:k}=nt(),{registerTimeout:Q,removeTimeout:P}=it(),a=ke(xe,M);if(a===M)return console.error("QDrawer needs to be child of QLayout"),M;let H,C=null,h;const s=x(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),S=r(()=>e.mini===!0&&s.value!==!0),b=r(()=>S.value===!0?e.miniWidth:e.width),u=x(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),o=r(()=>e.persistent!==!0&&(s.value===!0||Te.value===!0));function p(t,l){if(qe(),t!==!1&&a.animate(),g(0),s.value===!0){const y=a.instances[R.value];y!==void 0&&y.belowBreakpoint===!0&&y.hide(!1),L(1),a.isContainer.value!==!0&&k(!0)}else L(0),t!==!1&&ee(!1);Q(()=>{t!==!1&&ee(!0),l!==!0&&i("show",t)},we)}function ce(t,l){Be(),t!==!1&&a.animate(),L(0),g(D.value*b.value),te(),l!==!0?Q(()=>{i("hide",t)},we):P()}const{show:J,hide:V}=st({showing:u,hideOnRouteChange:o,handleShow:p,handleHide:ce}),{addToHistory:qe,removeFromHistory:Be}=lt(u,V,o),F={belowBreakpoint:s,hide:V},q=r(()=>e.side==="right"),D=r(()=>(d.lang.rtl===!0?-1:1)*(q.value===!0?1:-1)),de=x(0),O=x(!1),K=x(!1),fe=x(b.value*D.value),R=r(()=>q.value===!0?"left":"right"),X=r(()=>u.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:b.value:0),Y=r(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(q.value?"R":"L")!==-1||d.platform.is.ios===!0&&a.isContainer.value===!0),z=r(()=>e.overlay===!1&&u.value===!0&&s.value===!1),Te=r(()=>e.overlay===!0&&u.value===!0&&s.value===!1),Le=r(()=>"fullscreen q-drawer__backdrop"+(u.value===!1&&O.value===!1?" hidden":"")),$e=r(()=>({backgroundColor:`rgba(0,0,0,${de.value*.4})`})),ve=r(()=>q.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Qe=r(()=>q.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Se=r(()=>{const t={};return a.header.space===!0&&ve.value===!1&&(Y.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Qe.value===!1&&(Y.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),De=r(()=>{const t={width:`${b.value}px`,transform:`translateX(${fe.value}px)`};return s.value===!0?t:Object.assign(t,Se.value)}),Oe=r(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Me=r(()=>`q-drawer q-drawer--${e.side}`+(K.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(f.value===!0?" q-drawer--dark q-dark":"")+(O.value===!0?" no-transition":u.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${S.value===!0?"mini":"standard"}`+(Y.value===!0||z.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ve.value===!0?" q-drawer--top-padding":""))),He=r(()=>{const t=d.lang.rtl===!0?e.side:R.value;return[[re,Ie,void 0,{[t]:!0,mouse:!0}]]}),Ve=r(()=>{const t=d.lang.rtl===!0?R.value:e.side;return[[re,me,void 0,{[t]:!0,mouse:!0}]]}),ze=r(()=>{const t=d.lang.rtl===!0?R.value:e.side;return[[re,me,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function Z(){We(s,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}c(s,t=>{t===!0?(H=u.value,u.value===!0&&V(!1)):e.overlay===!1&&e.behavior!=="mobile"&&H!==!1&&(u.value===!0?(g(0),L(0),te()):J(!1))}),c(()=>e.side,(t,l)=>{a.instances[l]===F&&(a.instances[l]=void 0,a[l].space=!1,a[l].offset=0),a.instances[t]=F,a[t].size=b.value,a[t].space=z.value,a[t].offset=X.value}),c(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&Z()}),c(()=>e.behavior+e.breakpoint,Z),c(a.isContainer,t=>{u.value===!0&&k(t!==!0),t===!0&&Z()}),c(a.scrollbarWidth,()=>{g(u.value===!0?0:void 0)}),c(X,t=>{$("offset",t)}),c(z,t=>{i("onLayout",t),$("space",t)}),c(q,()=>{g()}),c(b,t=>{g(),ae(e.miniToOverlay,t)}),c(()=>e.miniToOverlay,t=>{ae(t,b.value)}),c(()=>d.lang.rtl,()=>{g()}),c(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ae(),a.animate())}),c(S,t=>{i("miniState",t)});function g(t){t===void 0?be(()=>{t=u.value===!0?0:b.value,g(D.value*t)}):(a.isContainer.value===!0&&q.value===!0&&(s.value===!0||Math.abs(t)===b.value)&&(t+=D.value*a.scrollbarWidth.value),fe.value=t)}function L(t){de.value=t}function ee(t){const l=t===!0?"remove":a.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function Ae(){C!==null&&clearTimeout(C),n.proxy&&n.proxy.$el&&n.proxy.$el.classList.add("q-drawer--mini-animate"),K.value=!0,C=setTimeout(()=>{C=null,K.value=!1,n&&n.proxy&&n.proxy.$el&&n.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Ie(t){if(u.value!==!1)return;const l=b.value,y=U(t.distance.x,0,l);if(t.isFinal===!0){y>=Math.min(75,l)===!0?J():(a.animate(),L(0),g(D.value*l)),O.value=!1;return}g((d.lang.rtl===!0?q.value!==!0:q.value)?Math.max(l-y,0):Math.min(0,y-l)),L(U(y/l,0,1)),t.isFirst===!0&&(O.value=!0)}function me(t){if(u.value!==!0)return;const l=b.value,y=t.direction===e.side,N=(d.lang.rtl===!0?y!==!0:y)?U(t.distance.x,0,l):0;if(t.isFinal===!0){Math.abs(N)<Math.min(75,l)===!0?(a.animate(),L(1),g(0)):V(),O.value=!1;return}g(D.value*N),L(U(1-N/l,0,1)),t.isFirst===!0&&(O.value=!0)}function te(){k(!1),ee(!0)}function $(t,l){a.update(e.side,t,l)}function We(t,l){t.value!==l&&(t.value=l)}function ae(t,l){$("size",t===!0?e.miniWidth:l)}return a.instances[e.side]=F,ae(e.miniToOverlay,b.value),$("space",z.value),$("offset",X.value),e.showIfAbove===!0&&e.modelValue!==!0&&u.value===!0&&e["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Ne(()=>{i("onLayout",z.value),i("miniState",S.value),H=e.showIfAbove===!0;const t=()=>{(u.value===!0?p:ce)(!1,!0)};if(a.totalWidth.value!==0){be(t);return}h=c(a.totalWidth,()=>{h(),h=void 0,u.value===!1&&e.showIfAbove===!0&&s.value===!1?J(!1):t()})}),pe(()=>{h!==void 0&&h(),C!==null&&(clearTimeout(C),C=null),u.value===!0&&te(),a.instances[e.side]===F&&(a.instances[e.side]=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const t=[];s.value===!0&&(e.noSwipeOpen===!1&&t.push(Ue(B("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),He.value)),t.push(ye("div",{ref:"backdrop",class:Le.value,style:$e.value,"aria-hidden":"true",onClick:V},void 0,"backdrop",e.noSwipeBackdrop!==!0&&u.value===!0,()=>ze.value)));const l=S.value===!0&&m.mini!==void 0,y=[B("div",{...w,key:""+l,class:[Oe.value,w.class]},l===!0?m.mini():se(m.default))];return e.elevated===!0&&u.value===!0&&y.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(ye("aside",{ref:"content",class:Me.value,style:De.value},y,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>Ve.value)),B("div",{class:"q-drawer-container"},t)}}});const mt={__name:"LeftDrawer",setup(e){const{leftDrawerOpen:m}=le(j()),i=x(null);Ee(()=>{const{userRoutes:n}=le(j());i.value=n.value});const{userRoutes:w}=le(j());return je(()=>{i.value=w.value}),(n,d)=>W(m)?(T(),A(vt,{key:0,"show-if-above":"",bordered:""},{default:_(()=>[v(ot,null,{default:_(()=>[v(oe,{header:""},{default:_(()=>[I(" \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u044B ")]),_:1}),(T(!0),E(Ke,null,Ge(W(w),(f,k)=>(T(),A(Re,{clickable:"",tag:"a",to:f.link,key:`r-${k}`},{default:_(()=>[f.icon?(T(),A(he,{key:0,avatar:""},{default:_(()=>[v(Je,{name:f.icon},null,8,["name"])]),_:2},1024)):_e("",!0),v(he,null,{default:_(()=>[v(oe,null,{default:_(()=>[I(ue(f.title),1)]),_:2},1024),v(oe,{caption:""},{default:_(()=>[I(ue(f.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})):_e("",!0)}};var ge=G({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:m}){const i=r(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>B("div",{class:i.value},se(m.default))}}),ht=G({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:m}){const i=r(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>B("div",{class:i.value,role:"toolbar"},se(m.default))}}),bt=G({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:m,emit:i}){const{proxy:{$q:w}}=Ce(),n=ke(xe,M);if(n===M)return console.error("QHeader needs to be child of QLayout"),M;const d=x(parseInt(e.heightHint,10)),f=x(!0),k=r(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||w.platform.is.ios&&n.isContainer.value===!0),Q=r(()=>{if(e.modelValue!==!0)return 0;if(k.value===!0)return f.value===!0?d.value:0;const o=d.value-n.scroll.value.position;return o>0?o:0}),P=r(()=>e.modelValue!==!0||k.value===!0&&f.value!==!0),a=r(()=>e.modelValue===!0&&P.value===!0&&e.reveal===!0),H=r(()=>"q-header q-layout__section--marginal "+(k.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(P.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),C=r(()=>{const o=n.rows.value.top,p={};return o[0]==="l"&&n.left.space===!0&&(p[w.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),o[2]==="r"&&n.right.space===!0&&(p[w.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),p});function h(o,p){n.update("header",o,p)}function s(o,p){o.value!==p&&(o.value=p)}function S({height:o}){s(d,o),h("size",o)}function b(o){a.value===!0&&s(f,!0),i("focusin",o)}c(()=>e.modelValue,o=>{h("space",o),s(f,!0),n.animate()}),c(Q,o=>{h("offset",o)}),c(()=>e.reveal,o=>{o===!1&&s(f,e.modelValue)}),c(f,o=>{n.animate(),i("reveal",o)}),c(n.scroll,o=>{e.reveal===!0&&s(f,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const u={};return n.instances.header=u,e.modelValue===!0&&h("size",d.value),h("space",e.modelValue),h("offset",Q.value),pe(()=>{n.instances.header===u&&(n.instances.header=void 0,h("size",0),h("offset",0),h("space",!1))}),()=>{const o=Xe(m.default,[]);return e.elevated===!0&&o.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(B(ft,{debounce:0,onResize:S})),B("header",{class:H.value,style:C.value,onFocusin:b},o)}}});const yt={class:"account-menu"},_t={key:0,class:"login-btn"},wt={key:1,class:"account-info"},gt={__name:"UserControl",setup(e){const{user:m,logout:i}=Ye();return(w,n)=>(T(),E("div",yt,[W(m)?(T(),E("div",wt,[v(ie,{color:"secondary",icon:"logout",label:"\u0412\u044B\u0439\u0442\u0438",onClick:W(i)},null,8,["onClick"])])):(T(),E("div",_t,[v(ie,{color:"secondary",icon:"person",label:"\u0412\u043E\u0439\u0442\u0438",to:"/login"})]))]))}},kt={__name:"HeaderComponent",setup(e){const{toggleLeftDrawer:m}=j(),i=x(""),w=Ze();return et(()=>{i.value=w.currentRoute.value.name}),(n,d)=>(T(),A(bt,{elevated:""},{default:_(()=>[v(ht,null,{default:_(()=>[v(ie,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:W(m)},null,8,["onClick"]),v(ge,null,{default:_(()=>[I(" ArtisHelper ")]),_:1}),v(ge,null,{default:_(()=>[I(ue(i.value),1)]),_:1}),v(gt)]),_:1})]),_:1}))}},pt=at({name:"MainLayout",components:{HeaderComponent:kt,LeftDrawer:mt},setup(){}});function xt(e,m,i,w,n,d){const f=ne("HeaderComponent"),k=ne("LeftDrawer"),Q=ne("router-view");return T(),A(Pe,{view:"lHh Lpr lFf"},{default:_(()=>[v(f),v(k),v(Fe,null,{default:_(()=>[v(Q)]),_:1})]),_:1})}var At=tt(pt,[["render",xt]]);export{At as default};
