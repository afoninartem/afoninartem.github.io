import{i as rt,e as Te,r as T,a as _,b as We,o as it,aZ as Oe,d as ut,aw as ct,h as V,Y as ie,X as dt,ah as vt,Q as J,S as ft,j as pe,aG as mt,c as be,w as ae,K as ht,a4 as pt,aj as bt,g as ge,a7 as gt,a1 as le,M as _t,a8 as yt,a9 as ve,aa as Pe,ad as Ue,ae as Se,ap as wt,a_ as kt,a$ as Ct,f as Tt,Z as Pt,D as St,aq as ne,p as F,y as ue,af as L,v as k,t as D,u as z,s as _e,E as oe,q as G,x as Xe,B as Be,A as fe,ag as me,m as qt}from"./index.b9a71e9d.js";import{m as xt}from"./private.use-form.ffc8d2ad.js";import{Q as $t}from"./QResizeObserver.7dd6d67b.js";import{c as qe}from"./position-engine.efc72dd4.js";import{b as Ae,d as At}from"./selection.1f4bea8e.js";import{r as Bt,Q as Ke}from"./QTable.75a93575.js";import{g as Ne,s as ze}from"./touch.9135741d.js";import{u as Lt}from"./use-render-cache.3aae9b27.js";import{u as Rt,a as Vt}from"./use-dark.1714981a.js";import{Q as It}from"./QExpansionItem.a406a63f.js";import{Q as Mt}from"./QFile.9aec73f5.js";import{Q as Le}from"./QInput.7af5d37e.js";import{Q as Dt}from"./QToggle.7cdf2de1.js";import{Q as he}from"./QTd.4232ad98.js";import"./scroll.c2b3f819.js";import"./QSeparator.15630a44.js";import"./QList.dae925e4.js";import"./QChip.9a3cd326.js";import"./QItem.594eba31.js";import"./QMenu.42850f98.js";import"./QDialog.494f7269.js";import"./use-prevent-scroll.8dd69e36.js";import"./use-key-composition.b60036a9.js";import"./format.de7e9769.js";import"./QLinearProgress.a4873d73.js";import"./use-file-dom-props.8b60af69.js";let Qt=0;const Et=["click","keydown"],Ft={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Qt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ht(e,s,r,o){const a=rt(Oe,Te);if(a===Te)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Te;const{proxy:t}=pe(),i=T(null),h=T(null),y=T(null),m=_(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),v=_(()=>a.currentModel.value===e.name),g=_(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(v.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(o!==void 0?o.linkClass.value:"")),p=_(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),q=_(()=>e.disable===!0||a.hasFocus.value===!0||v.value===!1&&a.hasActiveTab.value===!0?-1:e.tabindex||0);function x(c,R){var u;if(R!==!0&&(c==null?void 0:c.qAvoidFocus)!==!0&&((u=i.value)==null||u.focus()),e.disable===!0){(o==null?void 0:o.hasRouterLink.value)===!0&&ie(c);return}if(o===void 0){a.updateModel({name:e.name}),r("click",c);return}if(o.hasRouterLink.value===!0){const b=($={})=>{let S;const H=$.to===void 0||mt($.to,e.to)===!0?a.avoidRouteWatcher=xt():null;return o.navigateToRouterLink(c,{...$,returnRouterError:!0}).catch(N=>{S=N}).then(N=>{var Z;if(H===a.avoidRouteWatcher&&(a.avoidRouteWatcher=!1,S===void 0&&(N===void 0||((Z=N.message)==null?void 0:Z.startsWith("Avoided redundant navigation"))===!0)&&a.updateModel({name:e.name})),$.returnRouterError===!0)return S!==void 0?Promise.reject(S):N})};r("click",c,b),c.defaultPrevented!==!0&&b();return}r("click",c)}function M(c){dt(c,[13,32])?x(c,!0):vt(c)!==!0&&c.keyCode>=35&&c.keyCode<=40&&c.altKey!==!0&&c.metaKey!==!0&&a.onKbdNavigate(c.keyCode,t.$el)===!0&&ie(c),r("keydown",c)}function Q(){const c=a.tabProps.value.narrowIndicator,R=[],u=V("div",{ref:y,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});e.icon!==void 0&&R.push(V(J,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&R.push(V("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&R.push(e.alertIcon!==void 0?V(J,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):V("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),c===!0&&R.push(u);const b=[V("div",{class:"q-focus-helper",tabindex:-1,ref:i}),V("div",{class:p.value},ft(s.default,R))];return c===!1&&b.push(u),b}const U={name:_(()=>e.name),rootRef:h,tabIndicatorRef:y,routeData:o};We(()=>{a.unregisterTab(U)}),it(()=>{a.registerTab(U)});function W(c,R){const u={ref:h,class:g.value,tabindex:q.value,role:"tab","aria-selected":v.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:M,...R};return ut(V(c,u,Q()),[[ct,m.value]])}return{renderTab:W,$tabs:a}}var xe=be({name:"QTab",props:Ft,emits:Et,setup(e,{slots:s,emit:r}){const{renderTab:o}=Ht(e,s,r);return()=>o("div")}});function Ut(e,s,r){const o=r===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${e?` text-${e}`:""}`}const Nt=["left","center","right","justify"];var zt=be({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Nt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:s,emit:r}){const{proxy:o}=pe(),{$q:a}=o,{registerTick:t}=qe(),{registerTick:i}=qe(),{registerTick:h}=qe(),{registerTimeout:y,removeTimeout:m}=Ae(),{registerTimeout:v,removeTimeout:g}=Ae(),p=T(null),q=T(null),x=T(e.modelValue),M=T(!1),Q=T(!0),U=T(!1),W=T(!1),c=[],R=T(0),u=T(!1);let b=null,$=null,S;const H=_(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ut(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),N=_(()=>{const n=R.value,l=x.value;for(let f=0;f<n;f++)if(c[f].name.value===l)return!0;return!1}),Z=_(()=>`q-tabs__content--align-${M.value===!0?"left":W.value===!0?"justify":e.align}`),ye=_(()=>`q-tabs row no-wrap items-center q-tabs--${M.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),we=_(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Z.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),d=_(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),P=_(()=>e.vertical!==!0&&a.lang.rtl===!0),E=_(()=>Bt===!1&&P.value===!0);ae(P,te),ae(()=>e.modelValue,n=>{X({name:n,setCurrent:!0,skipEmit:!0})}),ae(()=>e.outsideArrows,ce);function X({name:n,setCurrent:l,skipEmit:f}){x.value!==n&&(f!==!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",n),(l===!0||e["onUpdate:modelValue"]===void 0)&&(Ye(x.value,n),x.value=n))}function ce(){t(()=>{p.value&&Re({width:p.value.offsetWidth,height:p.value.offsetHeight})})}function Re(n){if(d.value===void 0||q.value===null)return;const l=n[d.value.container],f=Math.min(q.value[d.value.scroll],Array.prototype.reduce.call(q.value.children,(B,C)=>B+(C[d.value.content]||0),0)),A=l>0&&f>l;M.value=A,A===!0&&i(te),W.value=l<parseInt(e.breakpoint,10)}function Ye(n,l){const f=n!=null&&n!==""?c.find(B=>B.name.value===n):null,A=l!=null&&l!==""?c.find(B=>B.name.value===l):null;if(de===!0)de=!1;else if(f&&A){const B=f.tabIndicatorRef.value,C=A.tabIndicatorRef.value;b!==null&&(clearTimeout(b),b=null),B.style.transition="none",B.style.transform="none",C.style.transition="none",C.style.transform="none";const w=B.getBoundingClientRect(),I=C.getBoundingClientRect();C.style.transform=e.vertical===!0?`translate3d(0,${w.top-I.top}px,0) scale3d(1,${I.height?w.height/I.height:1},1)`:`translate3d(${w.left-I.left}px,0,0) scale3d(${I.width?w.width/I.width:1},1,1)`,h(()=>{b=setTimeout(()=>{b=null,C.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",C.style.transform="none"},70)})}A&&M.value===!0&&ee(A.rootRef.value)}function ee(n){const{left:l,width:f,top:A,height:B}=q.value.getBoundingClientRect(),C=n.getBoundingClientRect();let w=e.vertical===!0?C.top-A:C.left-l;if(w<0){q.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(w),te();return}w+=e.vertical===!0?C.height-B:C.width-f,w>0&&(q.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(w),te())}function te(){const n=q.value;if(n===null)return;const l=n.getBoundingClientRect(),f=e.vertical===!0?n.scrollTop:Math.abs(n.scrollLeft);P.value===!0?(Q.value=Math.ceil(f+l.width)<n.scrollWidth-1,U.value=f>0):(Q.value=f>0,U.value=e.vertical===!0?Math.ceil(f+l.height)<n.scrollHeight:Math.ceil(f+l.width)<n.scrollWidth)}function Ve(n){$!==null&&clearInterval($),$=setInterval(()=>{Ze(n)===!0&&K()},5)}function Ie(){Ve(E.value===!0?Number.MAX_SAFE_INTEGER:0)}function Me(){Ve(E.value===!0?0:Number.MAX_SAFE_INTEGER)}function K(){$!==null&&(clearInterval($),$=null)}function Ge(n,l){const f=Array.prototype.filter.call(q.value.children,I=>I===l||I.matches&&I.matches(".q-tab.q-focusable")===!0),A=f.length;if(A===0)return;if(n===36)return ee(f[0]),f[0].focus(),!0;if(n===35)return ee(f[A-1]),f[A-1].focus(),!0;const B=n===(e.vertical===!0?38:37),C=n===(e.vertical===!0?40:39),w=B===!0?-1:C===!0?1:void 0;if(w!==void 0){const I=P.value===!0?-1:1,O=f.indexOf(l)+w*I;return O>=0&&O<A&&(ee(f[O]),f[O].focus({preventScroll:!0})),!0}}const Je=_(()=>E.value===!0?{get:n=>Math.abs(n.scrollLeft),set:(n,l)=>{n.scrollLeft=-l}}:e.vertical===!0?{get:n=>n.scrollTop,set:(n,l)=>{n.scrollTop=l}}:{get:n=>n.scrollLeft,set:(n,l)=>{n.scrollLeft=l}});function Ze(n){const l=q.value,{get:f,set:A}=Je.value;let B=!1,C=f(l);const w=n<C?-1:1;return C+=w*5,C<0?(B=!0,C=0):(w===-1&&C<=n||w===1&&C>=n)&&(B=!0,C=n),A(l,C),te(),B}function De(n,l){for(const f in n)if(n[f]!==l[f])return!1;return!0}function et(){let n=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const f=c.filter(w=>{var I;return((I=w.routeData)==null?void 0:I.hasRouterLink.value)===!0}),{hash:A,query:B}=o.$route,C=Object.keys(B).length;for(const w of f){const I=w.routeData.exact.value===!0;if(w.routeData[I===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:O,query:ke,matched:st,href:lt}=w.routeData.resolvedLink.value,Ce=Object.keys(ke).length;if(I===!0){if(O!==A||Ce!==C||De(B,ke)===!1)continue;n=w.name.value;break}if(O!==""&&O!==A||Ce!==0&&De(ke,B)===!1)continue;const Y={matchedLen:st.length,queryDiff:C-Ce,hrefLen:lt.length-O.length};if(Y.matchedLen>l.matchedLen){n=w.name.value,l=Y;continue}else if(Y.matchedLen!==l.matchedLen)continue;if(Y.queryDiff<l.queryDiff)n=w.name.value,l=Y;else if(Y.queryDiff!==l.queryDiff)continue;Y.hrefLen>l.hrefLen&&(n=w.name.value,l=Y)}if(n===null&&c.some(w=>w.routeData===void 0&&w.name.value===x.value)===!0){de=!1;return}X({name:n,setCurrent:!0})}function tt(n){if(m(),u.value!==!0&&p.value!==null&&n.target&&typeof n.target.closest=="function"){const l=n.target.closest(".q-tab");l&&p.value.contains(l)===!0&&(u.value=!0,M.value===!0&&ee(l))}}function nt(){y(()=>{u.value=!1},30)}function se(){Ee.avoidRouteWatcher===!1?v(et):g()}function Qe(){if(S===void 0){const n=ae(()=>o.$route.fullPath,se);S=()=>{n(),S=void 0}}}function at(n){c.push(n),R.value++,ce(),n.routeData===void 0||o.$route===void 0?v(()=>{if(M.value===!0){const l=x.value,f=l!=null&&l!==""?c.find(A=>A.name.value===l):null;f&&ee(f.rootRef.value)}}):(Qe(),n.routeData.hasRouterLink.value===!0&&se())}function ot(n){c.splice(c.indexOf(n),1),R.value--,ce(),S!==void 0&&n.routeData!==void 0&&(c.every(l=>l.routeData===void 0)===!0&&S(),se())}const Ee={currentModel:x,tabProps:H,hasFocus:u,hasActiveTab:N,registerTab:at,unregisterTab:ot,verifyRouteModel:se,updateModel:X,onKbdNavigate:Ge,avoidRouteWatcher:!1};ht(Oe,Ee);function Fe(){b!==null&&clearTimeout(b),K(),S==null||S()}let He,de;return We(Fe),pt(()=>{He=S!==void 0,Fe()}),bt(()=>{He===!0&&(Qe(),de=!0,se()),ce()}),()=>V("div",{ref:p,class:ye.value,role:"tablist",onFocusin:tt,onFocusout:nt},[V($t,{onResize:Re}),V("div",{ref:q,class:we.value,onScroll:te},ge(s.default)),V(J,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(Q.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||a.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Ie,onTouchstartPassive:Ie,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K}),V(J,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(U.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||a.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Me,onTouchstartPassive:Me,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K})])}});function jt(e){const s=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,o)=>{const a=parseFloat(r);a&&(s[o]=a)}),s}var Wt=gt({name:"touch-swipe",beforeMount(e,{value:s,arg:r,modifiers:o}){if(o.mouse!==!0&&le.has.touch!==!0)return;const a=o.mouseCapture===!0?"Capture":"",t={handler:s,sensitivity:jt(r),direction:Ne(o),noop:_t,mouseStart(i){ze(i,t)&&yt(i)&&(ve(t,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(i,!0))},touchStart(i){if(ze(i,t)){const h=i.target;ve(t,"temp",[[h,"touchmove","move","notPassiveCapture"],[h,"touchcancel","end","notPassiveCapture"],[h,"touchend","end","notPassiveCapture"]]),t.start(i)}},start(i,h){le.is.firefox===!0&&Pe(e,!0);const y=Ue(i);t.event={x:y.left,y:y.top,time:Date.now(),mouse:h===!0,dir:!1}},move(i){if(t.event===void 0)return;if(t.event.dir!==!1){ie(i);return}const h=Date.now()-t.event.time;if(h===0)return;const y=Ue(i),m=y.left-t.event.x,v=Math.abs(m),g=y.top-t.event.y,p=Math.abs(g);if(t.event.mouse!==!0){if(v<t.sensitivity[1]&&p<t.sensitivity[1]){t.end(i);return}}else if(window.getSelection().toString()!==""){t.end(i);return}else if(v<t.sensitivity[2]&&p<t.sensitivity[2])return;const q=v/h,x=p/h;t.direction.vertical===!0&&v<p&&v<100&&x>t.sensitivity[0]&&(t.event.dir=g<0?"up":"down"),t.direction.horizontal===!0&&v>p&&p<100&&q>t.sensitivity[0]&&(t.event.dir=m<0?"left":"right"),t.direction.up===!0&&v<p&&g<0&&v<100&&x>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&v<p&&g>0&&v<100&&x>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&v>p&&m<0&&p<100&&q>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&v>p&&m>0&&p<100&&q>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(ie(i),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),At(),t.styleCleanup=M=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const Q=()=>{document.body.classList.remove("no-pointer-events--children")};M===!0?setTimeout(Q,50):Q()}),t.handler({evt:i,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:h,distance:{x:v,y:p}})):t.end(i)},end(i){var h;t.event!==void 0&&(Se(t,"temp"),le.is.firefox===!0&&Pe(e,!1),(h=t.styleCleanup)==null||h.call(t,!0),i!==void 0&&t.event.dir!==!1&&ie(i),t.event=void 0)}};if(e.__qtouchswipe=t,o.mouse===!0){const i=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ve(t,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}le.has.touch===!0&&ve(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,s){const r=e.__qtouchswipe;r!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&r.end(),r.handler=s.value),r.direction=Ne(s.modifiers))},beforeUnmount(e){var r;const s=e.__qtouchswipe;s!==void 0&&(Se(s,"main"),Se(s,"temp"),le.is.firefox===!0&&Pe(e,!1),(r=s.styleCleanup)==null||r.call(s),delete e.__qtouchswipe)}});const Ot={name:{required:!0},disable:Boolean},je={setup(e,{slots:s}){return()=>V("div",{class:"q-panel scroll",role:"tabpanel"},ge(s.default))}},Xt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Kt=["update:modelValue","beforeTransition","transition"];function Yt(){const{props:e,emit:s,proxy:r}=pe(),{getCache:o}=Lt(),{registerTimeout:a}=Ae();let t,i;const h=T(null),y={value:null};function m(d){const P=e.vertical===!0?"up":"left";S((r.$q.lang.rtl===!0?-1:1)*(d.direction===P?1:-1))}const v=_(()=>[[Wt,m,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),g=_(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),p=_(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),q=_(()=>`--q-transition-duration: ${e.transitionDuration}ms`),x=_(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),M=_(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),Q=_(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ae(()=>e.modelValue,(d,P)=>{const E=R(d)===!0?u(d):-1;i!==!0&&$(E===-1?0:E<u(P)?-1:1),y.value!==E&&(y.value=E,s("beforeTransition",d,P),a(()=>{s("transition",d,P)},e.transitionDuration))});function U(){S(1)}function W(){S(-1)}function c(d){s("update:modelValue",d)}function R(d){return d!=null&&d!==""}function u(d){return t.findIndex(P=>P.props.name===d&&P.props.disable!==""&&P.props.disable!==!0)}function b(){return t.filter(d=>d.props.disable!==""&&d.props.disable!==!0)}function $(d){const P=d!==0&&e.animated===!0&&y.value!==-1?"q-transition--"+(d===-1?g.value:p.value):null;h.value!==P&&(h.value=P)}function S(d,P=y.value){let E=P+d;for(;E!==-1&&E<t.length;){const X=t[E];if(X!==void 0&&X.props.disable!==""&&X.props.disable!==!0){$(d),i=!0,s("update:modelValue",X.props.name),setTimeout(()=>{i=!1});return}E+=d}e.infinite===!0&&t.length!==0&&P!==-1&&P!==t.length&&S(d,d===-1?t.length:-1)}function H(){const d=u(e.modelValue);return y.value!==d&&(y.value=d),!0}function N(){const d=R(e.modelValue)===!0&&H()&&t[y.value];return e.keepAlive===!0?[V(Ct,M.value,[V(Q.value===!0?o(x.value,()=>({...je,name:x.value})):je,{key:x.value,style:q.value},()=>d)])]:[V("div",{class:"q-panel scroll",style:q.value,key:x.value,role:"tabpanel"},[d])]}function Z(){if(t.length!==0)return e.animated===!0?[V(wt,{name:h.value},N)]:N()}function ye(d){return t=kt(ge(d.default,[])).filter(P=>P.props!==null&&P.props.slot===void 0&&R(P.props.name)===!0),t.length}function we(){return t}return Object.assign(r,{next:U,previous:W,goTo:c}),{panelIndex:y,panelDirectives:v,updatePanelsList:ye,updatePanelIndex:H,getPanelContent:Z,getEnabledPanels:b,getPanels:we,isValidPanelName:R,keepAliveProps:M,needsUniqueKeepAliveWrapper:Q,goToPanelByOffset:S,goToPanel:c,nextPanel:U,previousPanel:W}}var $e=be({name:"QTabPanel",props:Ot,setup(e,{slots:s}){return()=>V("div",{class:"q-tab-panel",role:"tabpanel"},ge(s.default))}}),Gt=be({name:"QTabPanels",props:{...Xt,...Rt},emits:Kt,setup(e,{slots:s}){const r=pe(),o=Vt(e,r.proxy.$q),{updatePanelsList:a,getPanelContent:t,panelDirectives:i}=Yt(),h=_(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(a(s),Tt("div",{class:h.value},t(),"pan",e.swipeable,()=>i.value))}});const j=Pt("cashlessPromotional",()=>{const{user:e}=St(),s=T(null),r=T(null),o=T(null),a=T(null),t=T(null),i=T(null),h=T(null),y=T(null),m=_(()=>({analysis:s.value,settlements:r.value,turningSheet1012:o.value,turningSheet4106:a.value,consumption:t.value})),v=_(()=>i.value),g=async()=>{await ne.get("/accounting/cashless-promotions/result/download",{headers:{Authorization:`Bearer ${e.token}`},responseType:"blob"}).then(u=>{const b=u.headers.get("Content-Type");console.log(b);const $=`${new Date().toLocaleDateString()} \u0411\u0435\u0437\u043D\u0430\u043B\u0438\u0447\u043D\u044B\u0439 \u0440\u0430\u0441\u0441\u0447\u0435\u0442, \u0440\u0435\u043A\u043B\u0430\u043C\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B.xlsx`;console.log($);const S=URL.createObjectURL(u.data),H=document.createElement("a");H.href=S,H.download=$,document.body.appendChild(H),H.click(),document.body.removeChild(H),window.URL.revokeObjectURL(S)})},p=(u,b)=>{switch(b){case"analysis":s.value=u;break;case"settlements":r.value=u;break;case"10.12":o.value=u;break;case"41.06":a.value=u;break;case"consumption":t.value=u;break}},q=async(u=0)=>{if(!t.value)return;const b=new FormData;b.append("consumption",t.value),await ne.post("/accounting/cashless-promotions/consumption/upload",b,{headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"multipart/form-data",Sum:u}}).then($=>{y.value=$.data.data}).catch($=>console.log($))},x=_(()=>y.value),M=async()=>{await ne.get("/accounting/cashless-promotional/handbook",{headers:{Authorization:`Bearer ${e.token}`}}).then(u=>{h.value=u.data.data}).catch(u=>console.log(u))},Q=async()=>{const u=new FormData;u.append("analysis",m.value.analysis),u.append("settlements",m.value.settlements),u.append("10.12",m.value.turningSheet1012),u.append("41.06",m.value.turningSheet4106),await ne.post("/accounting/cashless-promotional/handbook/upload",u,{headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"multipart/form-data"}}).then(b=>{i.value=b.data.data}).catch(b=>console.log(b))},U=_(()=>h.value),W=_(()=>h.value.data.filter(b=>b.user_cashless));return{uploadFile:p,upload:Q,saveXLSX:g,uploadConsumption:q,getHandbook:M,updateHB:async u=>{await ne.post("/accounting/cashless-promotional/handbook/update",{...u},{headers:{Authorization:`Bearer ${e.token}`}}).then(b=>{M()}).catch(b=>console.log(b))},resetCashless:async u=>{await ne.post("/accounting/cashless-promotional/handbook/resetCashless",{...u},{headers:{Authorization:`Bearer ${e.token}`}}).then(b=>{M()}).catch(b=>console.log(b))},userHB:W,actualHB:U,consumption:t,cashlessPromotional:x,files:m,handbookSummary:v}}),Jt={class:"q-pa-md"},Zt={class:"q-gutter-md row items-start"},re={__name:"FileUploadTXT",props:["mode","label"],setup(e){const s=e,r=T(null),{uploadFile:o}=j();return(a,t)=>(F(),ue("div",Jt,[L("div",Zt,[k(Mt,{modelValue:r.value,"onUpdate:modelValue":[t[0]||(t[0]=i=>r.value=i),t[1]||(t[1]=i=>z(o)(r.value,s.mode))],label:s.label,square:"",filled:"","use-chips":"",accept:".txt",style:{width:"400px"}},{prepend:D(()=>[k(J,{name:"attach_file"})]),_:1},8,["modelValue","label"])])]))}};const en={key:0,class:"cashless-promotions__table"},tn={__name:"HandbookTable",setup(e){const{updateHB:s,getHandbook:r}=j(),{actualHB:o}=_e(j()),a=T(""),t=[["name","\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"],["cash_incomes","\u041F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439 \u0437\u0430 \u043D\u0430\u043B\u0438\u0447\u043D\u044B\u0435"],["cashless_incomes","\u041F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439 \u043F\u043E \u0411/\u041D"],["cashless_percent","% \u0411/\u041D"],["is_cashless","\u0421\u0442\u0430\u0442\u0443\u0441 \u0411/\u041D"]],i=async m=>{await s(m)},h=_(()=>t.map(m=>({name:m[0],required:!0,label:m[1],field:m[0],format:v=>m[0]=="cashless_percent"?`${v} %`:`${v}`,align:"left",sortable:!0}))),y={page:1,rowsPerPage:0};return(m,v)=>z(o)?(F(),ue("div",en,[k(Ke,{title:"\u0420\u0435\u043A\u043B\u0430\u043C\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",rows:z(o).data,columns:h.value,class:"my-sticky-header-table","row-key":"name",pagination:y,filter:a.value},{"top-right":D(g=>[k(Le,{dense:"",debounce:"300",modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=p=>a.value=p),name:"search",placeholder:"\u041F\u043E\u0438\u0441\u043A"},{append:D(()=>[k(J,{name:"search"})]),_:1},8,["modelValue"]),k(oe,{flat:"",round:"",dense:"",icon:g.inFullscreen?"fullscreen_exit":"fullscreen",onClick:g.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),"body-cell-is_cashless":D(g=>[typeof g.row.is_cashless=="boolean"?(F(),G(he,{key:0,props:g},{default:D(()=>[k(Dt,{name:g.row.name,modelValue:g.row.is_cashless,"onUpdate:modelValue":[p=>g.row.is_cashless=p,p=>i(g.row)],size:"xs",color:"green"},null,8,["name","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])):(F(),G(he,{key:1,props:g},{default:D(()=>[Xe(Be(g.row.is_cashless),1)]),_:2},1032,["props"]))]),_:1},8,["rows","columns","filter"])])):fe("",!0)}};const nn={class:"cashless-promotions__handbook"},an={class:"upload-section"},on={class:"upload-section__turning-sheets"},sn={class:"upload-section__reports"},ln={class:"summary-section"},rn={class:"table-section"},un={__name:"HandbookCashless",setup(e){const{upload:s}=j(),{handbookSummary:r,files:o}=_e(j()),a=_(()=>o.value&&o.value.analysis&&o.value.settlements&&o.value.turningSheet1012&&o.value.turningSheet4106);return(t,i)=>(F(),ue("div",nn,[k(It,{label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0434\u043B\u044F \u0441\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u0438\u043A\u0430",width:"100%"},{default:D(()=>[L("section",an,[L("div",on,[k(re,{mode:"10.12",label:"\u041E\u0431\u043E\u0440\u043E\u0442\u043D\u043E-\u0441\u0430\u043B\u044C\u0434\u043E\u0432\u0430\u044F \u0432\u0435\u0434\u043E\u043C\u043E\u0441\u0442\u044C \u043F\u043E \u0441\u0447\u0435\u0442\u0443 10.12.txt"}),k(re,{mode:"41.06",label:"\u041E\u0431\u043E\u0440\u043E\u0442\u043D\u043E-\u0441\u0430\u043B\u044C\u0434\u043E\u0432\u0430\u044F \u0432\u0435\u0434\u043E\u043C\u043E\u0441\u0442\u044C \u043F\u043E \u0441\u0447\u0435\u0442\u0443 41.06.txt"})]),L("div",sn,[k(re,{mode:"analysis",label:"TXT \u0410\u043D\u0430\u043B\u0438\u0437 \u0440\u0435\u043A\u043B\u0430\u043C\u043D\u043E\u0439 \u043F\u0440\u043E\u0434\u0443\u043A\u0446\u0438\u0438"}),k(re,{mode:"settlements",label:"TXT \u0420\u0430\u0441\u0447\u0435\u0442\u044B \u0441 \u043F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A\u0430\u043C\u0438"})]),a.value?(F(),G(oe,{key:0,class:"btn-fixed-width",color:"secondary",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",icon:"upload",style:{height:"61px"},onClick:i[0]||(i[0]=me(h=>z(s)(),["prevent"]))})):fe("",!0)])]),_:1}),L("section",ln,[L("p",null,Be(z(r)),1)]),L("section",rn,[k(tn)])]))}};const cn={class:"cashless-promotions__consumption"},dn={class:"upload-section"},vn={class:"inputs"},fn={class:"buttons"},mn={__name:"PromotionalConsumption",setup(e){const{cashlessPromotional:s,files:r}=_e(j()),{uploadConsumption:o,saveXLSX:a}=j(),t=T(null),i=_(()=>r.value&&r.value.consumption);return(h,y)=>(F(),ue("div",cn,[L("section",dn,[L("div",vn,[k(re,{mode:"consumption",label:"\u0421\u043A\u043B\u0430\u0434\u0441\u043A\u043E\u0439 \u0443\u0447\u0435\u0442 \u041C\u041F\u0417"}),k(Le,{modelValue:t.value,"onUpdate:modelValue":y[0]||(y[0]=m=>t.value=m),modelModifiers:{number:!0},type:"number",label:"\u041E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E: 1% \u0432\u044B\u0440\u0443\u0447\u043A\u0438",square:"",filled:"",style:{width:"400px"}},null,8,["modelValue"])]),L("div",fn,[i.value?(F(),G(oe,{key:0,class:"btn-fixed-width",color:"secondary",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",icon:"upload",style:{height:"61px"},onClick:y[1]||(y[1]=me(m=>z(o)(t.value),["prevent"]))})):fe("",!0),z(s)&&z(s).length?(F(),G(oe,{key:1,class:"btn-fixed-width",color:"secondary",label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",icon:"download",style:{height:"61px"},onClick:me(z(a),["prevent"])},null,8,["onClick"])):fe("",!0)])])]))}},hn={__name:"UserHandbookTable",setup(e){const{getHandbook:s,resetCashless:r}=j(),{userHB:o}=_e(j()),a=T(""),t=[["name","\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B"],["cash_incomes","\u041F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439 \u0437\u0430 \u043D\u0430\u043B\u0438\u0447\u043D\u044B\u0435"],["cashless_incomes","\u041F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439 \u043F\u043E \u0411/\u041D"],["cashless_percent","% \u0411/\u041D"],["is_cashless","\u0411/\u041D \u0438\u043B\u0438 \u041D\u0410\u041B"],["user_cashless","\u0423\u0434\u0430\u043B\u0438\u0442\u044C"]],i=async m=>{await r(m)},h=_(()=>t.map(m=>({name:m[0],required:!0,label:m[1],field:m[0],format:v=>m[0]=="cashless_percent"?`${v} %`:m[0]=="is_cashless"?v?"\u0411/\u041D":"\u041D\u0410\u041B":`${v}`,align:"left",sortable:!0}))),y={page:1,rowsPerPage:0};return(m,v)=>(F(),G(Ke,{title:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0431\u0435\u0437\u043D\u0430\u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438",rows:z(o),columns:h.value,class:"my-sticky-header-table","row-key":"name",pagination:y,filter:a.value},{"top-right":D(g=>[k(Le,{dense:"",debounce:"300",modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=p=>a.value=p),name:"search",placeholder:"\u041F\u043E\u0438\u0441\u043A"},{append:D(()=>[k(J,{name:"search"})]),_:1},8,["modelValue"]),k(oe,{flat:"",round:"",dense:"",icon:g.inFullscreen?"fullscreen_exit":"fullscreen",onClick:g.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),"body-cell-user_cashless":D(g=>[typeof g.row.user_cashless=="boolean"?(F(),G(he,{key:0,props:g},{default:D(()=>[k(oe,{icon:"delete",color:"primary",onClick:me(p=>i(g.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"])):(F(),G(he,{key:1,props:g},{default:D(()=>[Xe(Be(g.row.user_cashless),1)]),_:2},1032,["props"]))]),_:1},8,["rows","columns","filter"]))}};const pn={class:"cashless-promotional"},bn=L("h4",null,"\u0420\u0430\u0441\u0447\u0435\u0442 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u0434\u043B\u044F \u0411\u041F",-1),gn=L("p",null,"\u0414\u043B\u044F \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u043E\u0442\u0447\u0435\u0442\u0430 \u0421\u043A\u043B\u0430\u0434\u0441\u043A\u043E\u0439 \u0443\u0447\u0435\u0442 \u041C\u041F\u0417 \u0432 1\u04217.7 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 xls.",-1),_n=L("p",null,"\u0422\u0430\u043A\u0436\u0435 \u043C\u043E\u0436\u043D\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0443\u043C\u043C\u0443, \u043A\u043E\u0442\u043E\u0440\u0443\u044E \u043D\u0430\u0434\u043E \u0440\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u043C\u0435\u0436\u0434\u0443 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430\u043C\u0438 (\u043E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E).",-1),yn=L("h4",null,"\u0421\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u0438\u043A \u0440\u0435\u043A\u043B\u0430\u043C\u043D\u044B\u0445 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432",-1),wn=L("p",null,"\u0421\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u0438\u043A \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u043F\u0438\u0441\u043E\u043A \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u0441 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u043C\u0438 \u0434\u043B\u044F \u0437\u0430\u0434\u0430\u0447\u0438 \u043F\u0440\u0438\u0437\u043D\u0430\u043A\u0430\u043C\u0438.",-1),kn=L("p",null,"\u041D\u0430 \u044D\u0442\u043E\u0439 \u0432\u043A\u043B\u0430\u0434\u043A\u0435 \u043C\u043E\u0436\u043D\u043E \u043F\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0441\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u0438\u043A \u0441\u0432\u0435\u0436\u0435\u0439 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0435\u0439 \u043F\u043E \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F\u043C \u0438 \u043E\u0437\u043D\u0430\u043A\u043E\u043C\u0438\u0442\u044C\u0441\u044F \u0441 \u043E\u0431\u0437\u043E\u0440\u043E\u043C \u043F\u043E \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430\u043C.",-1),Cn=L("p",null,'\u0422\u0430\u043A\u0436\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 "\u0431\u0435\u0437\u043D\u0430\u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438" \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430, \u0435\u0441\u043B\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F.',-1),Tn=L("h4",null,"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",-1),Pn=L("p",null,'\u0421\u043F\u0438\u0441\u043E\u043A \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432, \u043F\u0440\u0438\u0437\u043D\u0430\u043A "\u0431\u0435\u0437\u043D\u0430\u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438" \u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u0431\u044B\u043B \u0438\u0437\u043C\u0435\u043D\u0435\u043D \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C.',-1),Sn=L("p",null,'\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u043F\u0440\u0438\u0437\u043D\u0430\u043A "\u0431\u0435\u0437\u043D\u0430\u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438" \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430 \u043D\u0430 \u043E\u0431\u0449\u0438\u0445 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u044F\u0445, \u0443\u0434\u0430\u043B\u0438\u0442\u0435 \u0435\u0433\u043E \u0438\u0437 \u044D\u0442\u043E\u0433\u043E \u0441\u043F\u0438\u0441\u043A\u0430.',-1),Zn={__name:"CashlessPromotional",setup(e){const{getHandbook:s}=j(),r=T("consumption");return ae(r,o=>{localStorage.setItem("tab",JSON.stringify(o))}),qt(async()=>{await s(),r.value=localStorage.getItem("tab")?JSON.parse(localStorage.getItem("tab")):"handbook"}),(o,a)=>(F(),ue("div",pn,[k(zt,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),class:"text-black","active-color":"secondary","indicator-color":"secondary",align:"justify","narrow-indicator":""},{default:D(()=>[k(xe,{name:"consumption",label:"\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u0441\u0445\u043E\u0434\u0430"}),k(xe,{name:"handbook",label:"\u0421\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u0438\u043A \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432"}),k(xe,{name:"settings",label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"})]),_:1},8,["modelValue"]),k(Gt,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=t=>r.value=t),animated:""},{default:D(()=>[k($e,{class:"panel",name:"consumption"},{default:D(()=>[bn,gn,_n,k(mn)]),_:1}),k($e,{class:"panel",name:"handbook"},{default:D(()=>[yn,wn,kn,Cn,k(un)]),_:1}),k($e,{class:"panel",name:"settings"},{default:D(()=>[Tn,Pn,Sn,k(hn)]),_:1})]),_:1},8,["modelValue"])]))}};export{Zn as default};
